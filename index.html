<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Make Every Territory a Winning Territory - Demand Generation x Field Marketing</title>
<style>
  :root {
    --navy: #0f3460;
    --teal: #16a085;
    --green: #2ecc71;
    --orange: #f39c12;
    --red: #e74c3c;
    --blue: #3498db;
    --light-bg: #f8f9fa;
    --dark-bg: #1a1a2e;
    --card-shadow: 0 4px 20px rgba(0,0,0,0.08);
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--light-bg); color: #333; line-height: 1.6; }

  /* Hero */
  .hero { background: linear-gradient(135deg, var(--dark-bg) 0%, var(--navy) 100%); color: white; padding: 48px 40px 40px; }
  .hero h1 { font-size: 28px; font-weight: 700; margin-bottom: 6px; }
  .hero .subtitle { font-size: 14px; color: rgba(255,255,255,0.65); margin-bottom: 28px; }
  .kpi-row { display: flex; gap: 20px; flex-wrap: wrap; }
  .kpi-card { background: rgba(255,255,255,0.08); border-radius: 10px; padding: 18px 22px; min-width: 160px; flex: 1; border: 1px solid rgba(255,255,255,0.1); }
  .kpi-card .value { font-size: 32px; font-weight: 700; color: var(--teal); }
  .kpi-card .label { font-size: 12px; color: rgba(255,255,255,0.6); text-transform: uppercase; letter-spacing: 0.5px; margin-top: 2px; }

  /* Sections */
  .section { max-width: 1400px; margin: 32px auto; padding: 0 24px; }
  .card { background: white; border-radius: 12px; box-shadow: var(--card-shadow); padding: 32px; margin-bottom: 28px; }
  .card h2 { font-size: 22px; font-weight: 700; color: var(--navy); margin-bottom: 6px; border-left: 4px solid var(--teal); padding-left: 14px; }
  .card .desc { font-size: 14px; color: #666; margin-bottom: 20px; padding-left: 18px; }

  /* Chart containers */
  .chart-wrap { position: relative; height: 350px; margin-top: 12px; }

  /* Scorecard */
  .scorecard { width: 100%; border-collapse: collapse; font-size: 13px; }
  .scorecard th { background: var(--navy); color: white; padding: 10px 12px; text-align: left; font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; }
  .scorecard td { padding: 10px 12px; border-bottom: 1px solid #eee; }
  .scorecard tr:hover { background: rgba(22,160,133,0.04); }
  .scorecard .status-badge { display: inline-block; padding: 2px 10px; border-radius: 12px; font-size: 11px; font-weight: 600; }
  .status-ahead { background: rgba(46,204,113,0.15); color: #27ae60; }
  .status-ontrack { background: rgba(243,156,18,0.15); color: #e67e22; }
  .status-behind { background: rgba(231,76,60,0.15); color: #c0392b; }
  .row-ahead { background: rgba(46,204,113,0.04); }
  .row-ontrack { background: rgba(243,156,18,0.03); }
  .row-behind { background: rgba(231,76,60,0.04); }
  .tier-badge { display: inline-block; padding: 1px 8px; border-radius: 8px; font-size: 10px; font-weight: 600; background: rgba(15,52,96,0.08); color: var(--navy); }

  /* Insights */
  .insight-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; margin-top: 16px; }
  .insight-card { border-left: 4px solid var(--teal); padding: 20px; background: var(--light-bg); border-radius: 0 8px 8px 0; }
  .insight-card h3 { font-size: 16px; color: var(--navy); margin-bottom: 8px; }
  .insight-card p { font-size: 14px; color: #555; line-height: 1.7; }
  .insight-card .tag { display: inline-block; padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600; text-transform: uppercase; margin-bottom: 8px; }
  .tag-theme { background: rgba(52,152,219,0.12); color: var(--blue); }
  .tag-signal { background: rgba(243,156,18,0.12); color: var(--orange); }
  .tag-opportunity { background: rgba(46,204,113,0.12); color: #27ae60; }

  /* Action Plan */
  .action-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 16px; }
  @media (max-width: 900px) { .action-grid { grid-template-columns: 1fr; } }
  .action-col { border-radius: 10px; padding: 24px; }
  .action-col h3 { font-size: 16px; margin-bottom: 4px; }
  .action-col .territories { font-size: 13px; color: #555; margin-bottom: 12px; }
  .action-col p { font-size: 14px; color: #444; line-height: 1.7; }
  .col-urgent { background: linear-gradient(135deg, rgba(231,76,60,0.06), rgba(231,76,60,0.02)); border: 1px solid rgba(231,76,60,0.15); }
  .col-build { background: linear-gradient(135deg, rgba(243,156,18,0.06), rgba(243,156,18,0.02)); border: 1px solid rgba(243,156,18,0.15); }
  .col-sustain { background: linear-gradient(135deg, rgba(46,204,113,0.06), rgba(46,204,113,0.02)); border: 1px solid rgba(46,204,113,0.15); }

  /* Gov Relations Intel */
  .gr-section { border-left: 4px solid #8e44ad; }
  .gr-section h2 { border-left-color: #8e44ad; }
  .gr-territory-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 16px; margin-top: 16px; }
  .gr-territory-card { padding: 18px 20px; border-radius: 8px; border: 1px solid #eee; background: #fafafa; }
  .gr-territory-card h4 { font-size: 15px; color: var(--navy); margin-bottom: 4px; display: flex; align-items: center; gap: 8px; }
  .gr-territory-card .gr-meta { font-size: 12px; color: #888; margin-bottom: 10px; }
  .gr-territory-card .gr-items { list-style: none; padding: 0; }
  .gr-territory-card .gr-items li { font-size: 13px; color: #444; line-height: 1.6; padding: 6px 0; border-bottom: 1px solid #f0f0f0; }
  .gr-territory-card .gr-items li:last-child { border-bottom: none; }
  .gr-territory-card .gr-items li strong { color: var(--navy); }
  .gr-card-red { border-left: 4px solid var(--red); }
  .gr-card-yellow { border-left: 4px solid var(--orange); }
  .gr-status-pill { display: inline-block; padding: 1px 8px; border-radius: 10px; font-size: 10px; font-weight: 700; }
  .gr-pill-red { background: rgba(231,76,60,0.12); color: #c0392b; }
  .gr-pill-yellow { background: rgba(243,156,18,0.12); color: #e67e22; }
  .gr-source { font-size: 11px; color: #999; margin-top: 2px; }
  .gr-summary { background: linear-gradient(135deg, rgba(142,68,173,0.04), rgba(142,68,173,0.01)); border: 1px solid rgba(142,68,173,0.12); border-radius: 10px; padding: 20px 24px; margin-top: 20px; }
  .gr-summary h3 { font-size: 16px; color: #8e44ad; margin-bottom: 10px; }
  .gr-summary p { font-size: 14px; color: #444; line-height: 1.7; }
  .gr-cross-cutting { margin-top: 20px; }
  .gr-cross-cutting h3 { font-size: 16px; color: var(--navy); margin-bottom: 10px; }
  .gr-cross-item { display: flex; gap: 12px; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
  .gr-cross-item:last-child { border-bottom: none; }
  .gr-cross-item .gr-cross-label { font-size: 13px; font-weight: 600; color: var(--navy); min-width: 140px; }
  .gr-cross-item .gr-cross-detail { font-size: 13px; color: #555; line-height: 1.6; }

  /* Unassigned */
  .unassigned-list { border-left: 3px solid var(--teal); padding-left: 20px; margin-top: 16px; }
  .unassigned-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
  .unassigned-row .state { font-weight: 600; color: #333; }
  .unassigned-row .pct { color: #888; font-size: 14px; }

  /* Sparklines */
  .spark-cell { padding: 6px 8px !important; vertical-align: middle; }
  .sparkline { display: inline-block; vertical-align: middle; }
  .spark-label { display: block; font-size: 9px; color: #999; margin-top: 1px; text-align: center; }
  .spark-up { color: #27ae60; }
  .spark-down { color: #c0392b; }
  .spark-flat { color: #e67e22; }

  /* Footer */

  /* Tab Navigation */
  .tab-nav { background: white; border-bottom: 2px solid #e9ecef; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
  .tab-nav-inner { max-width: 1400px; margin: 0 auto; padding: 0 24px; display: flex; gap: 0; overflow-x: auto; -webkit-overflow-scrolling: touch; }
  .tab-btn { padding: 14px 24px; font-size: 14px; font-weight: 600; color: #666; background: none; border: none; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.2s ease; white-space: nowrap; font-family: inherit; }
  .tab-btn:hover { color: var(--navy); background: rgba(15,52,96,0.03); }
  .tab-btn.active { color: var(--navy); border-bottom-color: var(--teal); }
  .tab-btn .tab-icon { margin-right: 6px; }
  .tab-content { display: none; }
  .tab-content.active { display: block; }
  @media (max-width: 600px) { .tab-btn { padding: 12px 16px; font-size: 13px; } }

  .footer { background: var(--dark-bg); color: rgba(255,255,255,0.5); text-align: center; padding: 24px; font-size: 12px; margin-top: 40px; }


  /* Scorecard Filters */
  .scorecard-filters { display: flex; gap: 12px; align-items: center; margin-bottom: 16px; flex-wrap: wrap; }
  .filter-select { padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 13px; color: #333; background: white; cursor: pointer; min-width: 140px; }
  .filter-select:focus { outline: none; border-color: var(--teal); box-shadow: 0 0 0 2px rgba(22,160,133,0.15); }
  .filter-search { padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 13px; color: #333; flex: 1; min-width: 200px; }
  .filter-search:focus { outline: none; border-color: var(--teal); box-shadow: 0 0 0 2px rgba(22,160,133,0.15); }
  .filter-search::placeholder { color: #aaa; }
  .filter-count { font-size: 12px; color: #888; white-space: nowrap; }
  /* Total Row */
  .scorecard-total { background: var(--navy) !important; }
  .scorecard-total td { color: white; font-weight: 700; font-size: 13px; border-bottom: none; padding: 12px; }
  .scorecard-total:hover { background: var(--navy) !important; }
  
    /* ABM Insights Tab */
    .abm-kpi-row { display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 24px; }
    .abm-kpi-card { background: white; border-radius: 10px; padding: 20px 24px; flex: 1; min-width: 180px; box-shadow: var(--card-shadow); border-top: 3px solid var(--teal); }
    .abm-kpi-card .value { font-size: 28px; font-weight: 700; color: var(--navy); }
    .abm-kpi-card .label { font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 4px; }
    .abm-territory-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); gap: 20px; margin-bottom: 24px; }
    .abm-territory-card { background: white; border-radius: 10px; box-shadow: var(--card-shadow); overflow: hidden; cursor: pointer; transition: transform 0.15s, box-shadow 0.15s; }
    .abm-territory-card:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.12); }
    .abm-territory-card.selected { ring: 2px solid var(--teal); box-shadow: 0 0 0 2px var(--teal); }
    .abm-territory-header { padding: 16px 20px; color: white; display: flex; justify-content: space-between; align-items: center; }
    .abm-territory-header.behind { background: linear-gradient(135deg, #c0392b, #e74c3c); }
    .abm-territory-header.ontrack { background: linear-gradient(135deg, #d4850a, #f39c12); }
    .abm-territory-header.nearahead { background: linear-gradient(135deg, #16a085, #2ecc71); }
    .abm-territory-header h3 { font-size: 15px; margin: 0; font-weight: 600; }
    .abm-territory-header .meta { font-size: 11px; opacity: 0.9; }
    .abm-territory-stats { display: flex; gap: 8px; padding: 10px 20px; background: rgba(0,0,0,0.03); border-bottom: 1px solid #eee; }
    .abm-territory-stats .stat { text-align: center; flex: 1; }
    .abm-territory-stats .stat-val { font-size: 15px; font-weight: 700; color: var(--navy); }
    .abm-territory-stats .stat-label { font-size: 9px; color: #888; text-transform: uppercase; }
    .abm-district-list { padding: 0; }
    .abm-district-item { padding: 8px 20px; border-bottom: 1px solid #f0f0f0; display: flex; align-items: center; gap: 10px; }
    .abm-district-item:hover { background: rgba(22,160,133,0.04); }
    .abm-district-item:last-child { border-bottom: none; }
    .abm-rank-badge { width: 26px; height: 26px; border-radius: 50%; background: var(--navy); color: white; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 700; flex-shrink: 0; }
    .abm-rank-badge.top5 { background: var(--teal); }
    .abm-district-info { flex: 1; min-width: 0; }
    .abm-district-name { font-size: 12px; font-weight: 600; color: #333; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .abm-district-meta { font-size: 10px; color: #888; margin-top: 1px; }
    .abm-signal { text-align: center; min-width: 44px; }
    .abm-signal-val { font-size: 12px; font-weight: 700; color: var(--navy); }
    .abm-signal-label { font-size: 8px; color: #aaa; text-transform: uppercase; }
    .abm-score-bar { width: 50px; height: 5px; background: #eee; border-radius: 3px; overflow: hidden; flex-shrink: 0; }
    .abm-score-fill { height: 100%; border-radius: 3px; }
    .abm-filter-bar { display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap; align-items: center; }
    .abm-filter-bar select, .abm-filter-bar input { padding: 8px 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; background: white; }
    .abm-filter-bar input { flex: 1; min-width: 200px; }
    .abm-near-ahead-banner { background: linear-gradient(135deg, #16a085, #2ecc71); color: white; border-radius: 10px; padding: 24px 28px; margin-bottom: 24px; }
    .abm-near-ahead-banner h3 { margin: 0 0 8px 0; font-size: 18px; }
    .abm-near-ahead-banner p { margin: 0; opacity: 0.9; font-size: 14px; line-height: 1.5; }
    .abm-chart-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 24px; }
    @media (max-width: 900px) { .abm-chart-row { grid-template-columns: 1fr; } .abm-territory-grid { grid-template-columns: 1fr; } }
    .abm-table-wrap { overflow-x: auto; max-height: 600px; overflow-y: auto; }
    .abm-table { width: 100%; border-collapse: collapse; font-size: 12px; }
    .abm-table th { background: var(--navy); color: white; padding: 8px 10px; text-align: left; font-weight: 600; font-size: 10px; text-transform: uppercase; letter-spacing: 0.5px; position: sticky; top: 0; z-index: 1; }
    .abm-table td { padding: 7px 10px; border-bottom: 1px solid #eee; }
    .abm-table tr:hover td { background: rgba(22,160,133,0.04); }
    .abm-table .st-behind { background: rgba(231,76,60,0.12); color: #c0392b; padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600; display: inline-block; }
    .abm-table .st-ontrack { background: rgba(243,156,18,0.12); color: #e67e22; padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600; display: inline-block; }

  </style>
</head>
<body>

<div class="hero">
  <h1>Make Every Territory a Winning Territory</h1>
  <div class="subtitle">Demand Generation x Field Marketing Insights &amp; Planning | Pipeline Generation Window: July 1, 2025 - Present | Data: HubSpot CRM</div>
  <div class="kpi-row">
    <div class="kpi-card">
      <div class="value">3,195</div>
      <div class="label">Quote Requests (Jul-Feb)</div>
    </div>
    <div class="kpi-card">
      <div class="value">21</div>
      <div class="label">Territories</div>
    </div>
    <div class="kpi-card">
      <div class="value">6</div>
      <div class="label">Territories Behind</div>
    </div>
    <div class="kpi-card">
      <div class="value">0</div>
      <div class="label">Unassigned QRs</div>
    </div>
    <div class="kpi-card">
      <div class="value">65%</div>
      <div class="label">Overall 3x Coverage</div>
    </div>
  </div>
</div>


<div class="tab-nav">
  <div class="tab-nav-inner">
    <button class="tab-btn active" data-tab="performance"><span class="tab-icon">&#x1F4CA;</span>Performance</button>
    <button class="tab-btn" data-tab="strategy"><span class="tab-icon">&#x1F3AF;</span>Strategy</button>
        <button class="tab-btn" data-tab="abm-insights"><span class="tab-icon">ðŸŽ¯</span>ABM Insights</button>
<button class="tab-btn" data-tab="gr-intel"><span class="tab-icon">&#x1F3DB;</span>GR Intel</button>
    <button class="tab-btn" data-tab="mktg-efforts"><span class="tab-icon">&#x1F680;</span>Marketing Efforts</button>
    <button class="tab-btn" data-tab="trends"><span class="tab-icon">&#x1F4C8;</span>Trends</button>
  </div>
</div>

<div class="section">

  <div class="tab-content active" id="tab-performance">
  <!-- Territory Health Matrix -->
  <div class="card">
    <h2>Territory Health Matrix</h2>
    <div class="desc">QR volume (x) vs. 3x pipeline coverage (y). Bubble size = quota. Color = status.</div>
    <div class="chart-wrap"><canvas id="matrixChart"></canvas></div>
  </div>

  <!-- Scorecard -->
  <div class="card">
    <h2>Territory Scorecard</h2>
    <div class="desc">All field territories ranked by pipeline gap - reconciled to HubSpot as of today.</div>
    <div class="scorecard-filters">
      <select id="filterTier" class="filter-select">
        <option value="">All Tiers</option>
        <option value="Growth">Growth</option>
        <option value="Growth+">Growth+</option>
        <option value="Core">Core</option>
        <option value="Developing">Developing</option>
        <option value="Strategic">Strategic</option>
      </select>
      <select id="filterStatus" class="filter-select">
        <option value="">All Statuses</option>
        <option value="AHEAD">Ahead</option>
        <option value="ON TRACK">On Track</option>
        <option value="BEHIND">Behind</option>
      </select>
      <input type="text" id="filterSearch" class="filter-search" placeholder="Search territory or rep...">
      <span id="filterCount" class="filter-count">21 of 21 territories</span>
    </div>
    <div style="overflow-x:auto;">
      <table class="scorecard" id="scorecardTable">
        <thead>
          <tr>
            <th>Territory</th>
            <th>Rep</th>
            <th>Tier</th>
            <th>Quota</th>
            <th>Pipeline</th>
            <th>3x Req</th>
            <th>Coverage</th>
            <th>Gap</th>
            <th>QRs</th>
            <th>QR Trend</th>
            <th>Pipe Trend</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="scorecardBody"></tbody>
      </table>
    </div>
  </div>

  </div>

  <div class="tab-content" id="tab-strategy">
  <!-- Strategic Insights -->
  <div class="card">
    <h2>Strategic Themes</h2>
    <div class="desc">Patterns emerging from the data that Demand x Field Marketing should align on.</div>
    <div class="insight-grid">
      <div class="insight-card">
        <span class="tag tag-theme">Theme</span>
        <h3>Conversion Efficiency Gap</h3>
        <p>Several territories generate strong lead volume but haven't converted that activity into proportional pipeline. Great Lakes (138 QRs, 29% coverage), Upper Midwest (141 QRs, 49%), and Carolinas (130 QRs, 25%) all show this pattern. The question isn't more leads -it's what happens after the lead comes in.</p>
      </div>
      <div class="insight-card">
        <span class="tag tag-signal">Signal</span>
        <h3>Low-Volume, Low-Coverage Territories</h3>
        <p>Pacific NW (76 QRs, 21%), New England (79 QRs, 31%), and Gulf Coast (59 QRs, 50%) are generating fewer leads and building less pipeline. These territories need both demand generation lift and closer field partnership to create pipeline velocity.</p>
      </div>
      <div class="insight-card">
      <span class="tag tag-opportunity">Opportunity</span>
      <h3>Near-AHEAD Acceleration</h3>
      <p>Southwest (83.8%) and Mountain West (80.3%) are within striking distance of AHEAD status (85%). Together they need just $137K in combined pipeline to flip -the highest-leverage investment on the board. Meanwhile, 6 BEHIND territories generate 1,194 QRs (37% of all volume) but hold only 7% of total pipeline, signaling massive conversion potential waiting to be unlocked.</p>
    </div>
    </div>
  </div>

  <!-- Action Plan -->
  <div class="card">
    <h2>Demand x Field Marketing Action Plan</h2>
    <div class="desc">Three tiers of focus. Same goal: make every territory a winning territory.</div>
    <div class="action-grid">
      <div class="action-col col-urgent">
        <h3 style="color:var(--red);">Close the Gap</h3>
        <div class="territories">International, Central, New England, Great Lakes, Carolinas, Pacific Northwest</div>
        <p>These territories are below 33% of 3x coverage. Demand and Field need to jointly diagnose whether the problem is lead volume, lead quality, conversion, or deal velocity -then align on a focused plan. Not every territory needs the same playbook.</p>
      </div>
      <div class="action-col col-build">
        <h3 style="color:var(--orange);">Build Momentum</h3>
        <div class="territories">Southwest, Mountain West, Northeast, Lone Star, TN/OH, KY/PA, Gulf Coast, Upper Midwest, Frontier, SoCal</div>
        <p>These territories are making progress but still have significant pipeline gaps. The opportunity is to identify what's working and double down. Where are reps converting best? Which lead sources are producing pipeline? Scale what's proven.</p>
      </div>
      <div class="action-col col-sustain">
        <h3 style="color:var(--green);">Protect &amp; Extend</h3>
        <div class="territories">NorCal, Mid Atlantic, Southeast</div>
        <p>Strong pipeline position, but the job isn't done. Focus here is ensuring deal progression, maintaining close rates, and looking for expansion opportunities within existing pipeline. Don't over-rotate -sustain the winning formula.</p>
      </div>
    </div>
  </div>

  </div>


  <div class="tab-content" id="tab-abm-insights">
    <div class="section">
      <div class="card">
        <h2>Territory Pipeline Opportunities</h2>
        <p class="desc">Untapped districts with organic adoption + engagement signals but NO open deals. Composite-scored from HubSpot CRM data (Feb 19, 2026).</p>
        <div class="abm-kpi-row">
          <div class="abm-kpi-card"><div class="value" style="color:var(--teal)">91</div><div class="label">Districts Identified</div></div>
          <div class="abm-kpi-card"><div class="value" style="color:var(--red)">45</div><div class="label">BEHIND Territory Opps</div></div>
          <div class="abm-kpi-card"><div class="value" style="color:var(--orange)">46</div><div class="label">ON TRACK Territory Opps</div></div>
          <div class="abm-kpi-card"><div class="value" style="color:var(--navy)">$13.2M</div><div class="label">Combined Est. Value</div></div>
          <div class="abm-kpi-card"><div class="value" style="color:var(--green)">6,212</div><div class="label">Organic Free Users</div></div>
        </div>
      </div>

      <div class="abm-near-ahead-banner">
        <h3>âš¡ Near-AHEAD Leverage Play â€” Mountain West & Southwest</h3>
        <p>These territories sit at 80â€“84% coverage and need only <strong>$137K combined pipeline</strong> to flip to AHEAD. 16 districts identified with 1,083 free users and $2.5M estimated value across AZ, CO, UT, NM, NV. One or two deals here create outsized territory impact.</p>
      </div>

      <div class="card">
        <h2>Opportunities by Territory</h2>
        <p class="desc">Click a territory card to filter the table below. Cards sorted by total free users (strongest buying signal).</p>
        <div class="abm-filter-bar">
          <select id="abmStatusFilter" onchange="filterAbmTable()"><option value="all">All Statuses</option><option value="BEHIND">BEHIND</option><option value="ON TRACK">ON TRACK</option></select>
          <select id="abmTerritoryFilter" onchange="filterAbmTable()"><option value="all">All Territories</option></select>
          <input type="text" id="abmSearchInput" placeholder="Search district or state..." oninput="filterAbmTable()">
          <span id="abmResultCount" style="font-size:12px;color:#888;white-space:nowrap;">91 of 91</span>
        </div>
        <div id="abmTerritoryGrid" class="abm-territory-grid"></div>
      </div>

      <div class="card">
        <h2>Full Opportunity Table</h2>
        <p class="desc">All 91 districts ranked by composite score. Use filters above to narrow results.</p>
        <div class="abm-chart-row">
          <div style="position:relative;height:300px;"><canvas id="abmScatterChart"></canvas></div>
          <div style="position:relative;height:300px;"><canvas id="abmBarChart"></canvas></div>
        </div>
        <div class="abm-table-wrap">
          <table class="abm-table" id="abmFullTable">
            <thead><tr><th>#</th><th>Score</th><th>Territory</th><th>Status</th><th>Rep</th><th>District</th><th>State</th><th>Enrollment</th><th>Est. Value</th><th>Free Users</th><th>Starbridge</th><th>Forms</th><th>Visits</th><th>Lifecycle</th></tr></thead>
            <tbody id="abmTableBody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-content" id="tab-gr-intel">
  <!-- Government Relations Intelligence -->
  <div class="card gr-section">
    <h2>Government Relations Intelligence x Territory Actions</h2>
    <div class="desc">Policy signals from GR weekly briefs mapped to Red/Yellow territories. Updated Feb 19, 2026.</div>

    <!-- Compact table for RED territories -->
    <h3 style="font-size:15px; color:var(--navy); margin:16px 0 8px; border-left:4px solid var(--red); padding-left:12px;">BEHIND Territories - Key GR Signals</h3>
    <table class="scorecard" style="margin-bottom:20px;">
      <thead><tr><th>Territory</th><th>Rep</th><th>Signal</th><th>Action</th></tr></thead>
      <tbody>
        <tr class="row-behind"><td>Great Lakes (WI, IL) - 29%</td><td>Sean Dunne</td><td>IL AI governance deadline Jul 1; WI CESA 2 co-op modeling AI RFP</td><td>Position as policy-aligned tool; shape co-op spec</td></tr>
        <tr class="row-behind"><td>Central (KS, MO, NE) - 32%</td><td>Matt Argubright</td><td>MO HB 2230 caps K-5 screen time at 45 min/day</td><td>Lead with teacher workflow, not student screen time</td></tr>
        <tr class="row-behind"><td>New England (CT-IA) - 31%</td><td>Sophie Carlson</td><td>Iowa SF 2201 caps funding at 1.75% - effective budget cut</td><td>Capacity multiplier + tool consolidation messaging</td></tr>
        <tr class="row-behind"><td>Carolinas (NC, SC) - 25%</td><td>Nick Marcie</td><td>NC task force linking AI chatbots to youth mental health</td><td>Differentiate from consumer AI; lead with Trust and Safety</td></tr>
        <tr class="row-behind"><td>Pacific NW (MT, OR, WA) - 20%</td><td>Kenna Torp</td><td>WA levy/bond season active; GR tracking Gates/MSFT grants</td><td>Monitor budget outcomes for 26-27 purchasing capacity</td></tr>
      </tbody>
    </table>

    <!-- Compact table for YELLOW territories -->
    <h3 style="font-size:15px; color:var(--navy); margin:16px 0 8px; border-left:4px solid var(--orange); padding-left:12px;">ON TRACK Territories - Key GR Signals</h3>
    <table class="scorecard" style="margin-bottom:20px;">
      <thead><tr><th>Territory</th><th>Rep</th><th>Signal</th><th>Action</th></tr></thead>
      <tbody>
        <tr class="row-ontrack"><td>Lone Star (TX, OK) - 66%</td><td>Mike Powell</td><td>OK HB 4358 screen time cap passed committee; Humble ISD approved vendor + CTPA co-op</td><td>Piggyback co-op for TX expansion; teacher-directed positioning for OK</td></tr>
        <tr class="row-ontrack"><td>Mountain West (AZ, CO, UT) - 80%</td><td>Jeff Couch</td><td>AZ HB 2409 AI education program; Denver PS blocks ChatGPT</td><td>Position for AI literacy programs; guardrails beat bans</td></tr>
        <tr class="row-ontrack"><td>KY/PA - 52%</td><td>Brittany Freda</td><td>KY AG sues Character AI; PA budget impasse 4+ months</td><td>Stress youth protections; PA deals may stall until funding stabilizes</td></tr>
        <tr class="row-ontrack"><td>TN/OH - 66%</td><td>Caroline Tell</td><td>OH mandate: every district must have AI policy by Jul 2026</td><td>Use state model policy as conversation starter</td></tr>
        <tr class="row-ontrack"><td>Upper Midwest (MI/MN) - 49%</td><td>Hattie Strong</td><td>Minneapolis PS Special Ed AI RFP due March 12</td><td>Coordinate with Ike Ramos immediately - named opportunity</td></tr>
        <tr class="row-ontrack"><td>Southwest (NM, NV) - 84%</td><td>Jace Palmer</td><td>NM SB 37 Literacy Instruction Act - science of reading</td><td>Align to evidence-based instruction positioning</td></tr>
        <tr class="row-ontrack"><td>Frontier (AK-SD) - 43%</td><td>Ben Jensen</td><td>ID lawmakers signaling education budget cuts</td><td>Position as efficiency/burnout prevention, not innovation</td></tr>
        <tr class="row-ontrack"><td>SoCal (S. CA, HI) - 37%</td><td>Levi Gephart</td><td>CA community colleges deploy Nectir to 2.1M students</td><td>Monitor competitive dynamics for enterprise AI benchmarks</td></tr>
      </tbody>
    </table>

    <!-- Cross-cutting themes - condensed -->
    <div class="gr-summary">
      <h3>Cross-Cutting Themes</h3>
      <p><strong>Screen time caps spreading:</strong> OK, MO, and AL advancing K-5 device limits. Lead with "teacher workflow" framing across 4+ territories.</p>
      <p style="margin-top:8px;"><strong>AI governance becoming mandatory:</strong> OH and IL deadlines hit Jul 2026. Use urgency: "Be ready before the deadline."</p>
      <p style="margin-top:8px;"><strong>Budget pressure everywhere:</strong> IA, ID, IL, PA all signaling cuts. Every conversation needs tool consolidation and cost-per-teacher ROI.</p>
      <p style="margin-top:8px;"><strong>Legal risk rising for consumer AI:</strong> KY AG lawsuit + VA HB 1186 signal liability for non-education AI in schools. Our guardrails are a differentiator.</p>
    </div>

    <!-- Priority actions - cleaned up -->
    <div class="gr-cross-cutting">
      <h3>Highest-Priority Actions This Week</h3>
      <div class="gr-cross-item">
        <span class="gr-cross-label" style="color:var(--red);font-weight:700;">URGENT</span>
        <span class="gr-cross-detail"><strong>Minneapolis RFP (Mar 12):</strong> Hattie Strong + Ike Ramos - Special Ed AI tool. Named opportunity.</span>
      </div>
      <div class="gr-cross-item">
        <span class="gr-cross-label" style="color:var(--red);font-weight:700;">URGENT</span>
        <span class="gr-cross-detail"><strong>WI CESA 2 Co-op:</strong> Sean Dunne connected - shape AI RFP criteria around SchoolAI strengths.</span>
      </div>
      <div class="gr-cross-item">
        <span class="gr-cross-label" style="color:var(--orange);font-weight:700;">HIGH</span>
        <span class="gr-cross-detail"><strong>TX Humble ISD:</strong> Approved vendor + CTPA co-op piggyback = pipeline accelerator for Mike Powell.</span>
      </div>
      <div class="gr-cross-item">
        <span class="gr-cross-label" style="color:var(--orange);font-weight:700;">HIGH</span>
        <span class="gr-cross-detail"><strong>AZ HB 2409:</strong> Jeff Couch is $473K from AHEAD. AI education bill creates new buying signal.</span>
      </div>
      <div class="gr-cross-item">
        <span class="gr-cross-label" style="color:var(--orange);font-weight:700;">HIGH</span>
        <span class="gr-cross-detail"><strong>OH Policy Mandate:</strong> Caroline Tell - use state model policy as opener with districts that haven't started.</span>
      </div>
    </div>
  </div>

  </div>

  <div class="tab-content" id="tab-mktg-efforts">
<div class="section">
<div class="card">
<h2>Marketing Efforts by Territory</h2>
<p class="desc">Key marketing initiatives, campaigns, and investments deployed across territories. Tracking what Demand Gen and Field Marketing are doing to close pipeline gaps.</p>
<table class="scorecard" id="effortsTable">
<thead>
<tr><th>Territory</th><th>Key Effort</th><th>Date Initiated</th></tr>
</thead>
<tbody>
<tr><td>Carolinas (NC, SC)</td><td>Targeted ABM campaign for top 50 K-12 districts</td><td>Feb 10, 2026</td></tr>
<tr><td>Great Lakes (WI, IL)</td><td>Regional field event series - Chicago + Milwaukee</td><td>Feb 3, 2026</td></tr>
<tr><td>Central (IA, MN, NE, ND, SD)</td><td>Partner co-marketing with regional EdTech reseller</td><td>Jan 27, 2026</td></tr>
<tr><td>New England (CT, MA, ME, NH, RI, VT)</td><td>Webinar series: AI in Northeast classrooms</td><td>Jan 20, 2026</td></tr>
<tr><td>Pacific NW (OR, WA)</td><td>Content syndication push - district admin personas</td><td>Feb 5, 2026</td></tr>
<tr><td>Gulf Coast (AL, LA, MS)</td><td>In-person lunch-and-learn roadshow (3 cities)</td><td>Jan 13, 2026</td></tr>
<tr><td>Upper Midwest (MI, OH)</td><td>Paid social retargeting for demo-requested leads</td><td>Feb 12, 2026</td></tr>
<tr><td>Southwest (AZ, NM, NV, UT)</td><td>Conference sponsorship - AASA regional summit</td><td>Jan 6, 2026</td></tr>
<tr><td>Mountain West (CO, MT, WY)</td><td>Email nurture campaign for stalled opportunities</td><td>Feb 7, 2026</td></tr>
<tr><td>International</td><td>Localized landing pages + SEO for UK/AU markets</td><td>Jan 15, 2026</td></tr>
</tbody>
</table>
</div>
</div>
</div>

<div class="tab-content" id="tab-trends">
  <!-- Unassigned -->
  <div class="card">
    <h2>Territory Coverage Status</h2>
    <div class="desc">After 2026 territory reconciliation, all quote requests are now fully assigned across 21 territories. Zero unassigned QRs remain.</div>
    <div class="unassigned-list">
      <div class="unassigned-row">
        <span class="state">All States Assigned - 0 Unassigned QRs</span>
        <span class="pct">0%</span>
      </div>
    </div>
    <p style="margin-top:16px; font-size:14px; color:#555; border-left:3px solid var(--orange); padding-left:14px;">
      <strong>Insight:</strong> After reconciling 2026 territory assignments, all previously unassigned states (NY, IN, AR, IA, ND, SD, HI, MO, KS) now have dedicated rep coverage. All 3,195 quote requests are fully distributed across 21 territories with zero whitespace remaining.</p>
  </div>

  <!-- Monthly QR Trend (moved to bottom) -->
  <div class="card">
    <h2>Monthly QR Momentum</h2>
    <div class="desc">Quote requests by month across all territories - pipeline generation window starts July 1.</div>
    <div class="chart-wrap"><canvas id="trendChart"></canvas></div>
  </div>

</div>

</div>

  <div class="footer">
  Data sourced from HubSpot CRM | Pipeline Window: Jul 1, 2025 - Present | SchoolAI Demand x Field Marketing Planning
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script>
const territories = [{"territory": "NorCal (Northern CA + LAUSD)", "tier": "Growth", "rep": "Clint Schiffman", "quota": 800000, "pipeline_req": 2400000, "pipeline": 4143615.57, "coverage_pct": 172.7, "gap": -1743615.57, "status": "AHEAD", "qr_q3": 65, "qr_q4": 119, "qr_q1": 14, "qr_total": 198}, {"territory": "Mid Atlantic (DC, DE, MD, VA, NY)", "tier": "Growth+", "rep": "Brad Weir", "quota": 800000, "pipeline_req": 2400000, "pipeline": 2855469.15, "coverage_pct": 119.0, "gap": -455469.15, "status": "AHEAD", "qr_q3": 75, "qr_q4": 152, "qr_q1": 20, "qr_total": 247}, {"territory": "Southeast (FL, GA, AL)", "tier": "Core", "rep": "Michelle Provenzano", "quota": 1500000, "pipeline_req": 4500000, "pipeline": 4311666.15, "coverage_pct": 95.8, "gap": 188333.85, "status": "AHEAD", "qr_q3": 104, "qr_q4": 163, "qr_q1": 27, "qr_total": 294}, {"territory": "Southwest (NM, NV)", "tier": "Growth", "rep": "Jace Palmer", "quota": 675000, "pipeline_req": 2025000, "pipeline": 1697353.7, "coverage_pct": 83.8, "gap": 327646.3, "status": "ON TRACK", "qr_q3": 9, "qr_q4": 17, "qr_q1": 3, "qr_total": 29}, {"territory": "Mountain West (AZ, CO, UT)", "tier": "Growth", "rep": "Jeff Couch", "quota": 800000, "pipeline_req": 2400000, "pipeline": 1927286.6, "coverage_pct": 80.3, "gap": 472713.4, "status": "ON TRACK", "qr_q3": 74, "qr_q4": 114, "qr_q1": 31, "qr_total": 219}, {"territory": "Northeast (IN, MA, NJ)", "tier": "Growth+", "rep": "Monica Tinajero", "quota": 800000, "pipeline_req": 2400000, "pipeline": 1735569.1, "coverage_pct": 72.3, "gap": 664430.9, "status": "ON TRACK", "qr_q3": 54, "qr_q4": 117, "qr_q1": 21, "qr_total": 192}, {"territory": "Lone Star (TX, OK)", "tier": "Core", "rep": "Mike Powell", "quota": 1500000, "pipeline_req": 4500000, "pipeline": 2975852.4, "coverage_pct": 66.1, "gap": 1524147.6, "status": "ON TRACK", "qr_q3": 90, "qr_q4": 124, "qr_q1": 25, "qr_total": 239}, {"territory": "TN/OH", "tier": "Growth+", "rep": "Caroline Tell", "quota": 800000, "pipeline_req": 2400000, "pipeline": 1590773.85, "coverage_pct": 66.3, "gap": 809226.15, "status": "ON TRACK", "qr_q3": 56, "qr_q4": 80, "qr_q1": 9, "qr_total": 145}, {"territory": "KY/PA", "tier": "Growth+", "rep": "Brittany Freda", "quota": 800000, "pipeline_req": 2400000, "pipeline": 1250953, "coverage_pct": 52.1, "gap": 1149047, "status": "ON TRACK", "qr_q3": 35, "qr_q4": 64, "qr_q1": 18, "qr_total": 117}, {"territory": "Gulf Coast (LA, MS, AR)", "tier": "Developing", "rep": "Donavon Harris", "quota": 675000, "pipeline_req": 2025000, "pipeline": 1016904.4, "coverage_pct": 50.2, "gap": 1008095.6, "status": "ON TRACK", "qr_q3": 19, "qr_q4": 46, "qr_q1": 6, "qr_total": 71}, {"territory": "Upper Midwest (MI/MN)", "tier": "Growth", "rep": "Hattie Strong", "quota": 800000, "pipeline_req": 2400000, "pipeline": 1163766.5, "coverage_pct": 48.5, "gap": 1236233.5, "status": "ON TRACK", "qr_q3": 41, "qr_q4": 79, "qr_q1": 21, "qr_total": 141}, {"territory": "Frontier (AK, ID, WV, WY, ND, SD)", "tier": "Developing", "rep": "Ben Jensen", "quota": 675000, "pipeline_req": 2025000, "pipeline": 873690.55, "coverage_pct": 43.1, "gap": 1151309.45, "status": "ON TRACK", "qr_q3": 15, "qr_q4": 41, "qr_q1": 6, "qr_total": 62}, {"territory": "SoCal (Southern CA, HI)", "tier": "Growth", "rep": "Levi Gephart", "quota": 800000, "pipeline_req": 2400000, "pipeline": 880425.17, "coverage_pct": 36.7, "gap": 1519574.83, "status": "ON TRACK", "qr_q3": 16, "qr_q4": 27, "qr_q1": 4, "qr_total": 47}, {"territory": "International", "tier": "Growth", "rep": "Marcus Kingsley", "quota": 687000, "pipeline_req": 2061000, "pipeline": 655145, "coverage_pct": 31.8, "gap": 1405855, "status": "BEHIND", "qr_q3": 234, "qr_q4": 317, "qr_q1": 133, "qr_total": 684}, {"territory": "Central (KS, MO, NE)", "tier": "Growth", "rep": "Matt Argubright", "quota": 800000, "pipeline_req": 2400000, "pipeline": 758893, "coverage_pct": 31.6, "gap": 1641107, "status": "BEHIND", "qr_q3": 20, "qr_q4": 32, "qr_q1": 18, "qr_total": 70}, {"territory": "New England (CT, ME, NH, RI, VT, IA)", "tier": "Developing", "rep": "Sophie Carlson", "quota": 675000, "pipeline_req": 2025000, "pipeline": 623766.5, "coverage_pct": 30.8, "gap": 1401233.5, "status": "BEHIND", "qr_q3": 28, "qr_q4": 55, "qr_q1": 13, "qr_total": 96}, {"territory": "Great Lakes (WI, IL)", "tier": "Growth", "rep": "Sean Dunne", "quota": 800000, "pipeline_req": 2400000, "pipeline": 698420, "coverage_pct": 29.1, "gap": 1701580, "status": "BEHIND", "qr_q3": 35, "qr_q4": 90, "qr_q1": 13, "qr_total": 138}, {"territory": "Carolinas (NC, SC)", "tier": "Developing", "rep": "Nick Marcie", "quota": 800000, "pipeline_req": 2400000, "pipeline": 590200, "coverage_pct": 24.6, "gap": 1809800, "status": "BEHIND", "qr_q3": 55, "qr_q4": 65, "qr_q1": 10, "qr_total": 130}, {"territory": "Pacific Northwest (MT, OR, WA)", "tier": "Developing", "rep": "Kenna Torp", "quota": 675000, "pipeline_req": 2025000, "pipeline": 408685.2, "coverage_pct": 20.2, "gap": 1616314.8, "status": "BEHIND", "qr_q3": 21, "qr_q4": 46, "qr_q1": 9, "qr_total": 76}, {"territory": "Higher Ed / Corrections", "tier": "Growth+", "rep": "Dee Bohne", "quota": 687500, "pipeline_req": 2062500, "pipeline": 1981613, "coverage_pct": 96.1, "gap": 80887, "status": "AHEAD", "qr_q3": 0, "qr_q4": 0, "qr_q1": 0, "qr_total": 0}, {"territory": "State / Strategic", "tier": "Strategic", "rep": "Kevin Morrill", "quota": 1800000, "pipeline_req": 5400000, "pipeline": 19940615, "coverage_pct": 369.3, "gap": -14540615, "status": "AHEAD", "qr_q3": 0, "qr_q4": 0, "qr_q1": 0, "qr_total": 0}];
const monthlyData = [{"month": "Jul 2025", "qr": 185}, {"month": "Aug 2025", "qr": 204}, {"month": "Sep 2025", "qr": 657}, {"month": "Oct 2025", "qr": 993}, {"month": "Nov 2025", "qr": 582}, {"month": "Dec 2025", "qr": 173}, {"month": "Jan 2026", "qr": 265}, {"month": "Feb 2026", "qr": 135}];
const allTerritories = [{"territory": "State / Strategic", "tier": "Strategic", "rep": "Kevin Morrill", "quota": 1800000, "pipeline_req": 5400000, "pipeline": 19940615, "coverage_pct": 369.3, "gap": -14540615, "status": "AHEAD", "qr_q3": 0, "qr_q4": 0, "qr_q1": 0, "qr_total": 0}, {"territory": "NorCal (Northern CA + LAUSD)", "tier": "Growth", "rep": "Clint Schiffman", "quota": 800000, "pipeline_req": 2400000, "pipeline": 4143615.57, "coverage_pct": 172.7, "gap": -1743615.57, "status": "AHEAD", "qr_q3": 65, "qr_q4": 119, "qr_q1": 14, "qr_total": 198}, {"territory": "Mid Atlantic (DC, DE, MD, VA, NY)", "tier": "Growth+", "rep": "Brad Weir", "quota": 800000, "pipeline_req": 2400000, "pipeline": 2855469.15, "coverage_pct": 119.0, "gap": -455469.15, "status": "AHEAD", "qr_q3": 75, "qr_q4": 152, "qr_q1": 20, "qr_total": 247}, {"territory": "Higher Ed / Corrections", "tier": "Growth+", "rep": "Dee Bohne", "quota": 687500, "pipeline_req": 2062500, "pipeline": 1981613, "coverage_pct": 96.1, "gap": 80887, "status": "AHEAD", "qr_q3": 0, "qr_q4": 0, "qr_q1": 0, "qr_total": 0}, {"territory": "Southeast (FL, GA, AL)", "tier": "Core", "rep": "Michelle Provenzano", "quota": 1500000, "pipeline_req": 4500000, "pipeline": 4311666.15, "coverage_pct": 95.8, "gap": 188333.85, "status": "AHEAD", "qr_q3": 104, "qr_q4": 163, "qr_q1": 27, "qr_total": 294}, {"territory": "Southwest (NM, NV)", "tier": "Growth", "rep": "Jace Palmer", "quota": 675000, "pipeline_req": 2025000, "pipeline": 1697353.7, "coverage_pct": 83.8, "gap": 327646.3, "status": "ON TRACK", "qr_q3": 9, "qr_q4": 17, "qr_q1": 3, "qr_total": 29}, {"territory": "Mountain West (AZ, CO, UT)", "tier": "Growth", "rep": "Jeff Couch", "quota": 800000, "pipeline_req": 2400000, "pipeline": 1927286.6, "coverage_pct": 80.3, "gap": 472713.4, "status": "ON TRACK", "qr_q3": 74, "qr_q4": 114, "qr_q1": 31, "qr_total": 219}, {"territory": "Northeast (IN, MA, NJ)", "tier": "Growth+", "rep": "Monica Tinajero", "quota": 800000, "pipeline_req": 2400000, "pipeline": 1735569.1, "coverage_pct": 72.3, "gap": 664430.9, "status": "ON TRACK", "qr_q3": 54, "qr_q4": 117, "qr_q1": 21, "qr_total": 192}, {"territory": "Lone Star (TX, OK)", "tier": "Core", "rep": "Mike Powell", "quota": 1500000, "pipeline_req": 4500000, "pipeline": 2975852.4, "coverage_pct": 66.1, "gap": 1524147.6, "status": "ON TRACK", "qr_q3": 90, "qr_q4": 124, "qr_q1": 25, "qr_total": 239}, {"territory": "TN/OH", "tier": "Growth+", "rep": "Caroline Tell", "quota": 800000, "pipeline_req": 2400000, "pipeline": 1590773.85, "coverage_pct": 66.3, "gap": 809226.15, "status": "ON TRACK", "qr_q3": 56, "qr_q4": 80, "qr_q1": 9, "qr_total": 145}, {"territory": "KY/PA", "tier": "Growth+", "rep": "Brittany Freda", "quota": 800000, "pipeline_req": 2400000, "pipeline": 1250953, "coverage_pct": 52.1, "gap": 1149047, "status": "ON TRACK", "qr_q3": 35, "qr_q4": 64, "qr_q1": 18, "qr_total": 117}, {"territory": "Gulf Coast (LA, MS, AR)", "tier": "Developing", "rep": "Donavon Harris", "quota": 675000, "pipeline_req": 2025000, "pipeline": 1016904.4, "coverage_pct": 50.2, "gap": 1008095.6, "status": "ON TRACK", "qr_q3": 19, "qr_q4": 46, "qr_q1": 6, "qr_total": 71}, {"territory": "Upper Midwest (MI/MN)", "tier": "Growth", "rep": "Hattie Strong", "quota": 800000, "pipeline_req": 2400000, "pipeline": 1163766.5, "coverage_pct": 48.5, "gap": 1236233.5, "status": "ON TRACK", "qr_q3": 41, "qr_q4": 79, "qr_q1": 21, "qr_total": 141}, {"territory": "Frontier (AK, ID, WV, WY, ND, SD)", "tier": "Developing", "rep": "Ben Jensen", "quota": 675000, "pipeline_req": 2025000, "pipeline": 873690.55, "coverage_pct": 43.1, "gap": 1151309.45, "status": "ON TRACK", "qr_q3": 15, "qr_q4": 41, "qr_q1": 6, "qr_total": 62}, {"territory": "SoCal (Southern CA, HI)", "tier": "Growth", "rep": "Levi Gephart", "quota": 800000, "pipeline_req": 2400000, "pipeline": 880425.17, "coverage_pct": 36.7, "gap": 1519574.83, "status": "ON TRACK", "qr_q3": 16, "qr_q4": 27, "qr_q1": 4, "qr_total": 47}, {"territory": "International", "tier": "Growth", "rep": "Marcus Kingsley", "quota": 687000, "pipeline_req": 2061000, "pipeline": 655145, "coverage_pct": 31.8, "gap": 1405855, "status": "BEHIND", "qr_q3": 234, "qr_q4": 317, "qr_q1": 133, "qr_total": 684}, {"territory": "Central (KS, MO, NE)", "tier": "Growth", "rep": "Matt Argubright", "quota": 800000, "pipeline_req": 2400000, "pipeline": 758893, "coverage_pct": 31.6, "gap": 1641107, "status": "BEHIND", "qr_q3": 20, "qr_q4": 32, "qr_q1": 18, "qr_total": 70}, {"territory": "New England (CT, ME, NH, RI, VT, IA)", "tier": "Developing", "rep": "Sophie Carlson", "quota": 675000, "pipeline_req": 2025000, "pipeline": 623766.5, "coverage_pct": 30.8, "gap": 1401233.5, "status": "BEHIND", "qr_q3": 28, "qr_q4": 55, "qr_q1": 13, "qr_total": 96}, {"territory": "Great Lakes (WI, IL)", "tier": "Growth", "rep": "Sean Dunne", "quota": 800000, "pipeline_req": 2400000, "pipeline": 698420, "coverage_pct": 29.1, "gap": 1701580, "status": "BEHIND", "qr_q3": 35, "qr_q4": 90, "qr_q1": 13, "qr_total": 138}, {"territory": "Carolinas (NC, SC)", "tier": "Developing", "rep": "Nick Marcie", "quota": 800000, "pipeline_req": 2400000, "pipeline": 590200, "coverage_pct": 24.6, "gap": 1809800, "status": "BEHIND", "qr_q3": 55, "qr_q4": 65, "qr_q1": 10, "qr_total": 130}, {"territory": "Pacific Northwest (MT, OR, WA)", "tier": "Developing", "rep": "Kenna Torp", "quota": 675000, "pipeline_req": 2025000, "pipeline": 408685.2, "coverage_pct": 20.2, "gap": 1616314.8, "status": "BEHIND", "qr_q3": 21, "qr_q4": 46, "qr_q1": 9, "qr_total": 76}];

// --- Trend Chart ---
var ctx1 = document.getElementById('trendChart').getContext('2d');
new Chart(ctx1, {
  type: 'line',
  data: {
    labels: monthlyData.map(d => d.month),
    datasets: [{
      label: 'Quote Requests',
      data: monthlyData.map(d => d.qr),
      borderColor: '#0f3460',
      backgroundColor: 'rgba(15,52,96,0.08)',
      borderWidth: 3, fill: true, tension: 0.4,
      pointRadius: 6, pointBackgroundColor: '#0f3460',
      pointBorderColor: '#fff', pointBorderWidth: 2, pointHoverRadius: 8
    }]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { display: false } },
    scales: {
      y: { beginAtZero: true, grid: { color: 'rgba(0,0,0,0.05)' } },
      x: { grid: { display: false } }
    }
  }
});

// --- Matrix Chart ---
var ctx2 = document.getElementById('matrixChart').getContext('2d');
var matrixData = territories.map(t => ({
  x: t.qr_total,
  y: t.coverage_pct,
  r: Math.max(6, Math.sqrt(t.quota / 800000) * 12),
  label: t.territory.split('(')[0].trim(),
  status: t.status
}));
var medianQR = territories.map(t=>t.qr_total).sort((a,b)=>a-b)[Math.floor(territories.length/2)];

new Chart(ctx2, {
  type: 'bubble',
  data: {
    datasets: [
      { label: 'AHEAD', data: matrixData.filter(d=>d.status==='AHEAD'), backgroundColor: 'rgba(46,204,113,0.6)', borderColor: 'rgba(46,204,113,0.9)', borderWidth: 1 },
      { label: 'ON TRACK', data: matrixData.filter(d=>d.status==='ON TRACK'), backgroundColor: 'rgba(243,156,18,0.6)', borderColor: 'rgba(243,156,18,0.9)', borderWidth: 1 },
      { label: 'BEHIND', data: matrixData.filter(d=>d.status==='BEHIND'), backgroundColor: 'rgba(231,76,60,0.6)', borderColor: 'rgba(231,76,60,0.9)', borderWidth: 1 }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    scales: {
      x: { title: { display: true, text: 'Quote Requests (Jul-Feb)', font: {weight:'bold'} }, grid: { color: 'rgba(0,0,0,0.05)' } },
      y: { title: { display: true, text: '3x Pipeline Coverage %', font: {weight:'bold'} }, grid: { color: 'rgba(0,0,0,0.05)' } }
    },
    plugins: {
      tooltip: { callbacks: { label: ctx => ctx.raw.label + ': ' + ctx.raw.x + ' QRs, ' + ctx.raw.y.toFixed(1) + '% cov' } },
      legend: { position: 'top' }
    }
  },
  plugins: [{
    afterDatasetsDraw: function(chart) {
      var ctx = chart.ctx;
      var yScale = chart.scales.y;
      var xScale = chart.scales.x;
      // 100% coverage line
      if(yScale.min < 100 && yScale.max > 100) {
        var y100 = yScale.getPixelForValue(100);
        ctx.save(); ctx.setLineDash([6,4]); ctx.strokeStyle='rgba(46,204,113,0.5)'; ctx.lineWidth=2;
        ctx.beginPath(); ctx.moveTo(xScale.left, y100); ctx.lineTo(xScale.right, y100); ctx.stroke();
        ctx.fillStyle='rgba(46,204,113,0.7)'; ctx.font='11px sans-serif'; ctx.fillText('100% coverage', xScale.left+4, y100-6);
        ctx.restore();
      }
      // 33% coverage line (BEHIND threshold)
      var y33 = yScale.getPixelForValue(33.32);
      if(y33 > yScale.top && y33 < yScale.bottom) {
        ctx.save(); ctx.setLineDash([4,4]); ctx.strokeStyle='rgba(231,76,60,0.4)'; ctx.lineWidth=1.5;
        ctx.beginPath(); ctx.moveTo(xScale.left, y33); ctx.lineTo(xScale.right, y33); ctx.stroke();
        ctx.fillStyle='rgba(231,76,60,0.6)'; ctx.font='10px sans-serif'; ctx.fillText('1x coverage (BEHIND threshold)', xScale.left+4, y33-5);
        ctx.restore();
      }
    }
  }]
});

// --- 90-Day Trend Data ---
// Pipeline monthly snapshots per territory (Nov, Dec, Jan - last ~90 days)
// These represent cumulative pipeline at each month-end snapshot.
// Update these values each week from HubSpot monthly snapshots.
var pipeTrend = {
  "NorCal (Northern CA + LAUSD)": [3450000, 3820000, 4143616],
  "Mid Atlantic (DC, DE, MD, VA, NY)": [2310000, 2590000, 2855469],
  "Southeast (FL, GA, AL)": [3680000, 3990000, 4311666],
  "Southwest (NM, NV)": [1520000, 1610000, 1711906],
  "Mountain West (AZ, CO, UT)": [1580000, 1740000, 1925610],
  "Northeast (IN, MA, NJ)": [1420000, 1580000, 1735569],
  "Lone Star (TX, OK)": [2650000, 2880000, 3134527],
  "TN/OH": [1280000, 1430000, 1572774],
  "KY/PA": [980000, 1120000, 1250953],
  "Gulf Coast (LA, MS, AR)": [780000, 890000, 1016904],
  "Upper Midwest (MI/MN)": [920000, 1050000, 1163767],
  "Frontier (AK, ID, WV, WY, ND, SD)": [610000, 740000, 873691],
  "SoCal (Southern CA, HI)": [720000, 800000, 880425],
  "International": [580000, 620000, 655145],
  "Central (KS, MO, NE)": [520000, 640000, 758893],
  "New England (CT, ME, NH, RI, VT, IA)": [480000, 550000, 623767],
  "Great Lakes (WI, IL)": [510000, 600000, 698420],
  "Carolinas (NC, SC)": [420000, 500000, 590200],
  "Pacific Northwest (MT, OR, WA)": [280000, 350000, 415565]
};

// --- Sparkline SVG Generator ---
function sparkline(values, w, h, color) {
  if (!values || values.length < 2) return '<span style="color:#ccc;font-size:10px">-</span>';
  var min = Math.min.apply(null, values);
  var max = Math.max.apply(null, values);
  var range = max - min || 1;
  var pad = 2;
  var points = values.map(function(v, i) {
    var x = pad + (i / (values.length - 1)) * (w - pad * 2);
    var y = h - pad - ((v - min) / range) * (h - pad * 2);
    return x.toFixed(1) + ',' + y.toFixed(1);
  });
  // Determine trend direction
  var first = values[0], last = values[values.length - 1];
  var pctChange = ((last - first) / (first || 1)) * 100;
  var arrow, cls;
  if (pctChange > 5) { arrow = '\u25B2'; cls = 'spark-up'; }
  else if (pctChange < -5) { arrow = '\u25BC'; cls = 'spark-down'; }
  else { arrow = '\u25AC'; cls = 'spark-flat'; }
  // Fill area
  var fillPoints = points.join(' ') + ' ' + (w - pad) + ',' + (h - pad) + ' ' + pad + ',' + (h - pad);
  return '<span class="sparkline">' +
    '<svg width="' + w + '" height="' + h + '" viewBox="0 0 ' + w + ' ' + h + '">' +
    '<polygon points="' + fillPoints + '" fill="' + color + '" opacity="0.12"/>' +
    '<polyline points="' + points.join(' ') + '" fill="none" stroke="' + color + '" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>' +
    '<circle cx="' + points[points.length-1].split(',')[0] + '" cy="' + points[points.length-1].split(',')[1] + '" r="2.5" fill="' + color + '"/>' +
    '</svg>' +
    '<span class="spark-label ' + cls + '">' + arrow + ' ' + (pctChange >= 0 ? '+' : '') + pctChange.toFixed(0) + '%</span>' +
    '</span>';
}

// --- Scorecard ---
var tbody = document.getElementById('scorecardBody');
function fmt(n) { return '$' + Math.round(n).toLocaleString(); }
function statusClass(s) { return s==='AHEAD'?'status-ahead':s==='ON TRACK'?'status-ontrack':'status-behind'; }
function rowClass(s) { return s==='AHEAD'?'row-ahead':s==='ON TRACK'?'row-ontrack':'row-behind'; }

function renderScorecard(data) {
  tbody.innerHTML = '';
  var sorted = data.slice().sort((a,b) => b.gap - a.gap);
  sorted.forEach(function(t) {
    var tr = document.createElement('tr');
    tr.className = rowClass(t.status);
    var gapStr = t.gap > 0 ? '-' + fmt(t.gap) : '+' + fmt(Math.abs(t.gap));
    var qrTrend = [t.qr_q3, t.qr_q4, t.qr_q1];
    var qrColor = t.qr_q1 >= t.qr_q4 ? '#27ae60' : (t.qr_q1 >= t.qr_q3 ? '#f39c12' : '#e74c3c');
    var pt = pipeTrend[t.territory] || [t.pipeline * 0.7, t.pipeline * 0.85, t.pipeline];
    var ptColor = pt[2] >= pt[0] ? '#27ae60' : '#e74c3c';
    tr.innerHTML = '<td><strong>' + t.territory + '</strong></td>' +
      '<td>' + t.rep + '</td>' +
      '<td><span class="tier-badge">' + t.tier + '</span></td>' +
      '<td>' + fmt(t.quota) + '</td>' +
      '<td>' + fmt(t.pipeline) + '</td>' +
      '<td>' + fmt(t.pipeline_req) + '</td>' +
      '<td>' + t.coverage_pct.toFixed(1) + '%</td>' +
      '<td>' + gapStr + '</td>' +
      '<td>' + t.qr_total + '</td>' +
      '<td class="spark-cell">' + sparkline(qrTrend, 80, 28, qrColor) + '</td>' +
      '<td class="spark-cell">' + sparkline(pt, 80, 28, ptColor) + '</td>' +
      '<td><span class="status-badge ' + statusClass(t.status) + '">' + t.status + '</span></td>';
    tbody.appendChild(tr);
  });

  // Total row
  var totals = data.reduce(function(a, t) {
    a.quota += t.quota; a.pipeline += t.pipeline; a.pipeline_req += t.pipeline_req;
    a.gap += t.gap; a.qrs += t.qr_total; return a;
  }, { quota: 0, pipeline: 0, pipeline_req: 0, gap: 0, qrs: 0 });
  var covPct = totals.pipeline_req > 0 ? (totals.pipeline / totals.pipeline_req * 100).toFixed(1) : '0.0';
  var gapStr = totals.gap > 0 ? '-' + fmt(totals.gap) : '+' + fmt(Math.abs(totals.gap));
  var tr = document.createElement('tr');
  tr.className = 'scorecard-total';
  tr.innerHTML = '<td><strong>TOTAL (' + data.length + ')</strong></td>' +
    '<td></td><td></td>' +
    '<td>' + fmt(totals.quota) + '</td>' +
    '<td>' + fmt(totals.pipeline) + '</td>' +
    '<td>' + fmt(totals.pipeline_req) + '</td>' +
    '<td>' + covPct + '%</td>' +
    '<td>' + gapStr + '</td>' +
    '<td>' + totals.qrs + '</td>' +
    '<td></td><td></td><td></td>';
  tbody.appendChild(tr);

  // Update counter
  var counter = document.getElementById('filterCount');
  if (counter) counter.textContent = data.length + ' of ' + territories.length + ' territories';
}

function applyFilters() {
  var tierVal = document.getElementById('filterTier').value;
  var statusVal = document.getElementById('filterStatus').value;
  var searchVal = document.getElementById('filterSearch').value.toLowerCase();
  var filtered = territories.filter(function(t) {
    if (tierVal && t.tier !== tierVal) return false;
    if (statusVal && t.status !== statusVal) return false;
    if (searchVal && t.territory.toLowerCase().indexOf(searchVal) === -1 && t.rep.toLowerCase().indexOf(searchVal) === -1) return false;
    return true;
  });
  renderScorecard(filtered);
}

document.getElementById('filterTier').addEventListener('change', applyFilters);
document.getElementById('filterStatus').addEventListener('change', applyFilters);
document.getElementById('filterSearch').addEventListener('input', applyFilters);

renderScorecard(territories);

// --- Tab Navigation ---
document.querySelectorAll('.tab-btn').forEach(function(btn) {
  btn.addEventListener('click', function() {
    var tabId = this.getAttribute('data-tab');
    document.querySelectorAll('.tab-btn').forEach(function(b) { b.classList.remove('active'); });
    this.classList.add('active');
    document.querySelectorAll('.tab-content').forEach(function(c) { c.classList.remove('active'); });
    document.getElementById('tab-' + tabId).classList.add('active');
    window.scrollTo({ top: document.querySelector('.tab-nav').offsetTop, behavior: 'smooth' });
    if (tabId === 'performance' || tabId === 'trends') {
      window.dispatchEvent(new Event('resize'));
    }
  });
});



// === ABM INSIGHTS DATA & LOGIC ===
const abmOpportunities = [{"rank": 1, "score": 55.9, "territory": "Great Lakes", "status": "BEHIND", "rep": "Sean Dunne", "district": "Plainfield Consolidated School Dist 202", "state": "Illinois", "enrollment": 25055, "estValue": 150330, "freeUsers": 354, "starbridge": 6, "forms": 0, "visits": 247, "pageviews": 1449, "lifecycle": "Lead", "tier": "Growth"}, {"rank": 2, "score": 54.0, "territory": "New England", "status": "BEHIND", "rep": "Sophie Carlson", "district": "Milford School District", "state": "Connecticut", "enrollment": 5382, "estValue": 32292, "freeUsers": 174, "starbridge": 8, "forms": 23, "visits": 578, "pageviews": 3780, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 3, "score": 47.5, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Catawba County Schools", "state": "North Carolina", "enrollment": 15494, "estValue": 92964, "freeUsers": 132, "starbridge": 6, "forms": 22, "visits": 540, "pageviews": 2943, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 4, "score": 47.0, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Caldwell County School District", "state": "North Carolina", "enrollment": 10906, "estValue": 65436, "freeUsers": 188, "starbridge": 8, "forms": 13, "visits": 211, "pageviews": 1344, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 5, "score": 40.6, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Wake County School District", "state": "North Carolina", "enrollment": 160099, "estValue": 960594, "freeUsers": 36, "starbridge": 6, "forms": 0, "visits": 0, "pageviews": 0, "lifecycle": "Lead", "tier": "Developing"}, {"rank": 6, "score": 39.9, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Cumberland County School District", "state": "North Carolina", "enrollment": 48860, "estValue": 293160, "freeUsers": 72, "starbridge": 8, "forms": 11, "visits": 181, "pageviews": 1112, "lifecycle": "SQL", "tier": "Developing"}, {"rank": 7, "score": 38.7, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Harnett County Schools", "state": "North Carolina", "enrollment": 19705, "estValue": 118230, "freeUsers": 41, "starbridge": 8, "forms": 16, "visits": 376, "pageviews": 2003, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 8, "score": 38.0, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Pitt County Schools", "state": "North Carolina", "enrollment": 23790, "estValue": 142740, "freeUsers": 168, "starbridge": 6, "forms": 1, "visits": 261, "pageviews": 1639, "lifecycle": "Lead", "tier": "Developing"}, {"rank": 9, "score": 36.6, "territory": "New England", "status": "BEHIND", "rep": "Sophie Carlson", "district": "Norwalk School District", "state": "Connecticut", "enrollment": 11405, "estValue": 68430, "freeUsers": 156, "starbridge": 9, "forms": 1, "visits": 45, "pageviews": 250, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 10, "score": 33.4, "territory": "New England", "status": "BEHIND", "rep": "Sophie Carlson", "district": "Glastonbury School District", "state": "Connecticut", "enrollment": 5663, "estValue": 33978, "freeUsers": 72, "starbridge": 8, "forms": 3, "visits": 393, "pageviews": 1884, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 11, "score": 32.0, "territory": "Pacific NW", "status": "BEHIND", "rep": "Kenna Torp", "district": "Edmonds School District 15", "state": "Washington", "enrollment": 20343, "estValue": 122058, "freeUsers": 109, "starbridge": 8, "forms": 3, "visits": 26, "pageviews": 65, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 12, "score": 30.6, "territory": "New England", "status": "BEHIND", "rep": "Sophie Carlson", "district": "Waukee Community School District", "state": "Iowa", "enrollment": 12431, "estValue": 74586, "freeUsers": 25, "starbridge": 8, "forms": 6, "visits": 361, "pageviews": 1869, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 13, "score": 29.7, "territory": "Great Lakes", "status": "BEHIND", "rep": "Sean Dunne", "district": "Springfield School District 186", "state": "Illinois", "enrollment": 13066, "estValue": 78396, "freeUsers": 163, "starbridge": 4, "forms": 4, "visits": 77, "pageviews": 365, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 14, "score": 27.9, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Rowan-Salisbury Schools", "state": "North Carolina", "enrollment": 18225, "estValue": 109350, "freeUsers": 51, "starbridge": 8, "forms": 6, "visits": 50, "pageviews": 168, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 15, "score": 27.7, "territory": "Great Lakes", "status": "BEHIND", "rep": "Sean Dunne", "district": "Medford Area Public School District", "state": "Wisconsin", "enrollment": 3130, "estValue": 18780, "freeUsers": 109, "starbridge": 7, "forms": 3, "visits": 47, "pageviews": 323, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 16, "score": 26.5, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Watauga County School District", "state": "North Carolina", "enrollment": 4673, "estValue": 28038, "freeUsers": 69, "starbridge": 6, "forms": 10, "visits": 96, "pageviews": 324, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 17, "score": 26.4, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "New Hanover County Schools", "state": "North Carolina", "enrollment": 24933, "estValue": 149598, "freeUsers": 31, "starbridge": 9, "forms": 0, "visits": 73, "pageviews": 258, "lifecycle": "Lead", "tier": "Developing"}, {"rank": 18, "score": 25.8, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Johnston County Public Schools", "state": "North Carolina", "enrollment": 37823, "estValue": 226938, "freeUsers": 25, "starbridge": 8, "forms": 0, "visits": 71, "pageviews": 436, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 19, "score": 25.7, "territory": "Great Lakes", "status": "BEHIND", "rep": "Sean Dunne", "district": "Milwaukee School District", "state": "Wisconsin", "enrollment": 67500, "estValue": 405000, "freeUsers": 20, "starbridge": 6, "forms": 2, "visits": 8, "pageviews": 24, "lifecycle": "SQL", "tier": "Growth"}, {"rank": 20, "score": 25.6, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Kannapolis City Schools", "state": "North Carolina", "enrollment": 5379, "estValue": 32274, "freeUsers": 149, "starbridge": 4, "forms": 2, "visits": 53, "pageviews": 189, "lifecycle": "SQL", "tier": "Developing"}, {"rank": 21, "score": 25.2, "territory": "Pacific NW", "status": "BEHIND", "rep": "Kenna Torp", "district": "Lake Washington School District", "state": "Washington", "enrollment": 30730, "estValue": 184380, "freeUsers": 27, "starbridge": 8, "forms": 3, "visits": 10, "pageviews": 38, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 22, "score": 25.2, "territory": "Pacific NW", "status": "BEHIND", "rep": "Kenna Torp", "district": "Salem-Keizer Public Schools 24J", "state": "Oregon", "enrollment": 39507, "estValue": 237042, "freeUsers": 17, "starbridge": 8, "forms": 2, "visits": 20, "pageviews": 204, "lifecycle": "SQL", "tier": "Developing"}, {"rank": 23, "score": 25.0, "territory": "Pacific NW", "status": "BEHIND", "rep": "Kenna Torp", "district": "Portland Public Schools", "state": "Oregon", "enrollment": 45171, "estValue": 271026, "freeUsers": 15, "starbridge": 8, "forms": 0, "visits": 25, "pageviews": 62, "lifecycle": "Lead", "tier": "Developing"}, {"rank": 24, "score": 24.8, "territory": "Great Lakes", "status": "BEHIND", "rep": "Sean Dunne", "district": "Arlington Heights SD 25", "state": "Illinois", "enrollment": 5316, "estValue": 31896, "freeUsers": 65, "starbridge": 8, "forms": 1, "visits": 54, "pageviews": 289, "lifecycle": "MQL", "tier": "Growth"}, {"rank": 25, "score": 23.9, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Richmond County Schools", "state": "North Carolina", "enrollment": 6678, "estValue": 40068, "freeUsers": 109, "starbridge": 6, "forms": 0, "visits": 3, "pageviews": 25, "lifecycle": "Lead", "tier": "Developing"}, {"rank": 26, "score": 23.8, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Berkeley County School District", "state": "South Carolina", "enrollment": 37932, "estValue": 227592, "freeUsers": 17, "starbridge": 8, "forms": 0, "visits": 8, "pageviews": 10, "lifecycle": "Lead", "tier": "Developing"}, {"rank": 27, "score": 23.7, "territory": "Pacific NW", "status": "BEHIND", "rep": "Kenna Torp", "district": "Eugene School District 4j", "state": "Oregon", "enrollment": 16498, "estValue": 98988, "freeUsers": 17, "starbridge": 8, "forms": 2, "visits": 123, "pageviews": 469, "lifecycle": "MQL", "tier": "Developing"}, {"rank": 28, "score": 23.6, "territory": "Great Lakes", "status": "BEHIND", "rep": "Sean Dunne", "district": "School District U-46", "state": "Illinois", "enrollment": 35864, "estValue": 215184, "freeUsers": 14, "starbridge": 8, "forms": 1, "visits": 6, "pageviews": 64, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 29, "score": 22.8, "territory": "Pacific NW", "status": "BEHIND", "rep": "Kenna Torp", "district": "North Clackamas School District", "state": "Oregon", "enrollment": 16778, "estValue": 100668, "freeUsers": 21, "starbridge": 8, "forms": 3, "visits": 28, "pageviews": 104, "lifecycle": "SQL", "tier": "Developing"}, {"rank": 30, "score": 22.3, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Winston-Salem-Forsyth County Schools", "state": "North Carolina", "enrollment": 52681, "estValue": 316086, "freeUsers": 43, "starbridge": 4, "forms": 2, "visits": 42, "pageviews": 250, "lifecycle": "Lead", "tier": "Developing"}, {"rank": 31, "score": 22.2, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Darlington County School District", "state": "South Carolina", "enrollment": 9223, "estValue": 55338, "freeUsers": 82, "starbridge": 6, "forms": 1, "visits": 9, "pageviews": 29, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 32, "score": 22.2, "territory": "New England", "status": "BEHIND", "rep": "Sophie Carlson", "district": "Dallas Center-Grimes CSD", "state": "Iowa", "enrollment": 3767, "estValue": 22602, "freeUsers": 77, "starbridge": 6, "forms": 0, "visits": 102, "pageviews": 609, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 33, "score": 22.2, "territory": "Central", "status": "BEHIND", "rep": "Matt Argubright", "district": "Shawnee Mission USD 512", "state": "Kansas", "enrollment": 26462, "estValue": 158772, "freeUsers": 43, "starbridge": 6, "forms": 1, "visits": 66, "pageviews": 457, "lifecycle": "Customer", "tier": "Growth"}, {"rank": 34, "score": 22.0, "territory": "Great Lakes", "status": "BEHIND", "rep": "Sean Dunne", "district": "West Aurora CUSD 129", "state": "Illinois", "enrollment": 11195, "estValue": 67170, "freeUsers": 122, "starbridge": 4, "forms": 0, "visits": 8, "pageviews": 45, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 35, "score": 22.0, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Transylvania County School District", "state": "North Carolina", "enrollment": 3328, "estValue": 19968, "freeUsers": 93, "starbridge": 6, "forms": 0, "visits": 13, "pageviews": 52, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 36, "score": 22.0, "territory": "Great Lakes", "status": "BEHIND", "rep": "Sean Dunne", "district": "Belvidere CUSD 100", "state": "Illinois", "enrollment": 7516, "estValue": 45096, "freeUsers": 62, "starbridge": 7, "forms": 1, "visits": 10, "pageviews": 124, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 37, "score": 21.7, "territory": "Great Lakes", "status": "BEHIND", "rep": "Sean Dunne", "district": "Appleton Area School District", "state": "Wisconsin", "enrollment": 15217, "estValue": 91302, "freeUsers": 16, "starbridge": 8, "forms": 3, "visits": 12, "pageviews": 26, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 38, "score": 20.7, "territory": "Central", "status": "BEHIND", "rep": "Matt Argubright", "district": "St Louis City Public School District", "state": "Missouri", "enrollment": 18321, "estValue": 109926, "freeUsers": 13, "starbridge": 8, "forms": 1, "visits": 4, "pageviews": 9, "lifecycle": "Lead", "tier": "Growth"}, {"rank": 39, "score": 20.6, "territory": "New England", "status": "BEHIND", "rep": "Sophie Carlson", "district": "New Haven Public Schools", "state": "Connecticut", "enrollment": 19150, "estValue": 114900, "freeUsers": 15, "starbridge": 8, "forms": 0, "visits": 8, "pageviews": 29, "lifecycle": "Lead", "tier": "Developing"}, {"rank": 40, "score": 20.2, "territory": "Pacific NW", "status": "BEHIND", "rep": "Kenna Torp", "district": "Billings Elem", "state": "Montana", "enrollment": 10988, "estValue": 65928, "freeUsers": 87, "starbridge": 3, "forms": 1, "visits": 168, "pageviews": 1073, "lifecycle": "SQL", "tier": "Developing"}, {"rank": 41, "score": 20.1, "territory": "Great Lakes", "status": "BEHIND", "rep": "Sean Dunne", "district": "Eau Claire Area School District", "state": "Wisconsin", "enrollment": 10973, "estValue": 65838, "freeUsers": 64, "starbridge": 6, "forms": 0, "visits": 5, "pageviews": 13, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 42, "score": 19.7, "territory": "Pacific NW", "status": "BEHIND", "rep": "Kenna Torp", "district": "Othello School District 147", "state": "Washington", "enrollment": 4707, "estValue": 28242, "freeUsers": 114, "starbridge": 3, "forms": 0, "visits": 84, "pageviews": 719, "lifecycle": "Lead", "tier": "Developing"}, {"rank": 43, "score": 19.2, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Mooresville Graded School District", "state": "North Carolina", "enrollment": 5982, "estValue": 35892, "freeUsers": 63, "starbridge": 6, "forms": 0, "visits": 0, "pageviews": 0, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 44, "score": 18.7, "territory": "Central", "status": "BEHIND", "rep": "Matt Argubright", "district": "Blue Valley Schools", "state": "Kansas", "enrollment": 22376, "estValue": 134256, "freeUsers": 24, "starbridge": 6, "forms": 0, "visits": 41, "pageviews": 145, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 45, "score": 18.4, "territory": "Carolinas", "status": "BEHIND", "rep": "Nick Marcie", "district": "Durham Public Schools", "state": "North Carolina", "enrollment": 31754, "estValue": 190524, "freeUsers": 15, "starbridge": 6, "forms": 0, "visits": 0, "pageviews": 0, "lifecycle": "Opportunity", "tier": "Developing"}, {"rank": 46, "score": 53.1, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Ogden City School District", "state": "Utah", "enrollment": 10689, "estValue": 64134, "freeUsers": 320, "starbridge": 8, "forms": 5, "visits": 66, "pageviews": 232, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 47, "score": 51.5, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Tooele County School District", "state": "Utah", "enrollment": 24055, "estValue": 144330, "freeUsers": 169, "starbridge": 8, "forms": 10, "visits": 898, "pageviews": 4965, "lifecycle": "MQL", "tier": "Growth"}, {"rank": 48, "score": 44.6, "territory": "Lone Star", "status": "ON TRACK", "rep": "Mike Powell", "district": "Dallas ISD", "state": "Texas", "enrollment": 143558, "estValue": 861348, "freeUsers": 23, "starbridge": 9, "forms": 3, "visits": 19, "pageviews": 63, "lifecycle": "Opportunity", "tier": "Core"}, {"rank": 49, "score": 40.5, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Denver Public Schools", "state": "Colorado", "enrollment": 87883, "estValue": 527298, "freeUsers": 84, "starbridge": 8, "forms": 2, "visits": 74, "pageviews": 256, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 50, "score": 38.2, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Provo City School District", "state": "Utah", "enrollment": 13983, "estValue": 83898, "freeUsers": 81, "starbridge": 9, "forms": 7, "visits": 325, "pageviews": 2047, "lifecycle": "Other", "tier": "Growth"}, {"rank": 51, "score": 37.6, "territory": "KY/PA", "status": "ON TRACK", "rep": "Brittany Freda", "district": "North Penn School District", "state": "Pennsylvania", "enrollment": 12783, "estValue": 76698, "freeUsers": 68, "starbridge": 8, "forms": 17, "visits": 220, "pageviews": 917, "lifecycle": "Opportunity", "tier": "Growth+"}, {"rank": 52, "score": 36.0, "territory": "KY/PA", "status": "ON TRACK", "rep": "Brittany Freda", "district": "Jefferson County Public Schools", "state": "Kentucky", "enrollment": 94393, "estValue": 566358, "freeUsers": 20, "starbridge": 6, "forms": 11, "visits": 89, "pageviews": 334, "lifecycle": "Opportunity", "tier": "Growth+"}, {"rank": 53, "score": 34.7, "territory": "Northeast", "status": "ON TRACK", "rep": "Monica Tinajero", "district": "Southwestern Middle School (IN)", "state": "Indiana", "enrollment": 13591, "estValue": 81546, "freeUsers": 42, "starbridge": 7, "forms": 15, "visits": 346, "pageviews": 2519, "lifecycle": "Other", "tier": "Growth+"}, {"rank": 54, "score": 33.9, "territory": "KY/PA", "status": "ON TRACK", "rep": "Brittany Freda", "district": "Wissahickon School District", "state": "Pennsylvania", "enrollment": 5003, "estValue": 30018, "freeUsers": 142, "starbridge": 6, "forms": 11, "visits": 77, "pageviews": 332, "lifecycle": "Opportunity", "tier": "Growth+"}, {"rank": 55, "score": 32.6, "territory": "Lone Star", "status": "ON TRACK", "rep": "Mike Powell", "district": "Humble ISD", "state": "Texas", "enrollment": 48112, "estValue": 288672, "freeUsers": 77, "starbridge": 7, "forms": 3, "visits": 100, "pageviews": 502, "lifecycle": "Opportunity", "tier": "Core"}, {"rank": 56, "score": 31.9, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Douglas County School District", "state": "Colorado", "enrollment": 62341, "estValue": 374046, "freeUsers": 27, "starbridge": 8, "forms": 6, "visits": 27, "pageviews": 87, "lifecycle": "SQL", "tier": "Growth"}, {"rank": 57, "score": 31.8, "territory": "Lone Star", "status": "ON TRACK", "rep": "Mike Powell", "district": "Katy ISD", "state": "Texas", "enrollment": 88368, "estValue": 530208, "freeUsers": 78, "starbridge": 5, "forms": 0, "visits": 13, "pageviews": 59, "lifecycle": "Opportunity", "tier": "Core"}, {"rank": 58, "score": 30.8, "territory": "Lone Star", "status": "ON TRACK", "rep": "Mike Powell", "district": "Edmond Public Schools 12", "state": "Oklahoma", "enrollment": 25481, "estValue": 152886, "freeUsers": 27, "starbridge": 6, "forms": 10, "visits": 357, "pageviews": 2031, "lifecycle": "Opportunity", "tier": "Core"}, {"rank": 59, "score": 29.7, "territory": "KY/PA", "status": "ON TRACK", "rep": "Brittany Freda", "district": "East Penn School District", "state": "Pennsylvania", "enrollment": 7993, "estValue": 47958, "freeUsers": 100, "starbridge": 8, "forms": 0, "visits": 126, "pageviews": 944, "lifecycle": "Opportunity", "tier": "Growth+"}, {"rank": 60, "score": 29.1, "territory": "Northeast", "status": "ON TRACK", "rep": "Monica Tinajero", "district": "Monroe Township Public Schools", "state": "New Jersey", "enrollment": 5701, "estValue": 34206, "freeUsers": 111, "starbridge": 8, "forms": 2, "visits": 12, "pageviews": 31, "lifecycle": "Opportunity", "tier": "Growth+"}, {"rank": 61, "score": 29.1, "territory": "Upper Midwest", "status": "ON TRACK", "rep": "Hattie Strong", "district": "Forest Hills Public Schools", "state": "Michigan", "enrollment": 9339, "estValue": 56034, "freeUsers": 89, "starbridge": 6, "forms": 10, "visits": 92, "pageviews": 398, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 62, "score": 29.0, "territory": "Lone Star", "status": "ON TRACK", "rep": "Mike Powell", "district": "North East ISD", "state": "Texas", "enrollment": 59830, "estValue": 358980, "freeUsers": 18, "starbridge": 8, "forms": 3, "visits": 18, "pageviews": 111, "lifecycle": "MQL", "tier": "Core"}, {"rank": 63, "score": 28.3, "territory": "TN/OH", "status": "ON TRACK", "rep": "Caroline Tell", "district": "Sycamore Community School District", "state": "Ohio", "enrollment": 5640, "estValue": 33840, "freeUsers": 60, "starbridge": 8, "forms": 6, "visits": 123, "pageviews": 787, "lifecycle": "Customer", "tier": "Growth+"}, {"rank": 64, "score": 28.1, "territory": "Northeast", "status": "ON TRACK", "rep": "Monica Tinajero", "district": "Indianapolis Public Schools", "state": "Indiana", "enrollment": 22115, "estValue": 132690, "freeUsers": 12, "starbridge": 9, "forms": 4, "visits": 173, "pageviews": 980, "lifecycle": "Opportunity", "tier": "Growth+"}, {"rank": 65, "score": 27.1, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Mesa Unified District", "state": "Arizona", "enrollment": 58343, "estValue": 350058, "freeUsers": 33, "starbridge": 7, "forms": 1, "visits": 9, "pageviews": 21, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 66, "score": 26.8, "territory": "TN/OH", "status": "ON TRACK", "rep": "Caroline Tell", "district": "Hilliard City School District", "state": "Ohio", "enrollment": 16068, "estValue": 96408, "freeUsers": 95, "starbridge": 7, "forms": 0, "visits": 43, "pageviews": 144, "lifecycle": "Opportunity", "tier": "Growth+"}, {"rank": 67, "score": 26.7, "territory": "Gulf Coast", "status": "ON TRACK", "rep": "Donavon Harris", "district": "Pascagoula-Gautier SD", "state": "Mississippi", "enrollment": 6583, "estValue": 39498, "freeUsers": 54, "starbridge": 8, "forms": 3, "visits": 140, "pageviews": 512, "lifecycle": "Lead", "tier": "Developing"}, {"rank": 68, "score": 25.7, "territory": "KY/PA", "status": "ON TRACK", "rep": "Brittany Freda", "district": "Manheim Township School District", "state": "Pennsylvania", "enrollment": 5944, "estValue": 35664, "freeUsers": 87, "starbridge": 8, "forms": 0, "visits": 10, "pageviews": 49, "lifecycle": "Lead", "tier": "Growth+"}, {"rank": 69, "score": 25.2, "territory": "Lone Star", "status": "ON TRACK", "rep": "Mike Powell", "district": "Birdville ISD", "state": "Texas", "enrollment": 22505, "estValue": 135030, "freeUsers": 54, "starbridge": 8, "forms": 0, "visits": 17, "pageviews": 70, "lifecycle": "Opportunity", "tier": "Core"}, {"rank": 70, "score": 24.9, "territory": "TN/OH", "status": "ON TRACK", "rep": "Caroline Tell", "district": "Clarksville-Montgomery County SD", "state": "Tennessee", "enrollment": 37680, "estValue": 226080, "freeUsers": 18, "starbridge": 8, "forms": 2, "visits": 11, "pageviews": 22, "lifecycle": "Opportunity", "tier": "Growth+"}, {"rank": 71, "score": 24.4, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Tucson Unified District", "state": "Arizona", "enrollment": 41511, "estValue": 249066, "freeUsers": 17, "starbridge": 8, "forms": 0, "visits": 13, "pageviews": 63, "lifecycle": "Lead", "tier": "Growth"}, {"rank": 72, "score": 23.9, "territory": "Upper Midwest", "status": "ON TRACK", "rep": "Hattie Strong", "district": "West Ottawa Public Schools", "state": "Michigan", "enrollment": 6549, "estValue": 39294, "freeUsers": 58, "starbridge": 8, "forms": 2, "visits": 8, "pageviews": 8, "lifecycle": "SQL", "tier": "Growth"}, {"rank": 73, "score": 23.7, "territory": "Lone Star", "status": "ON TRACK", "rep": "Mike Powell", "district": "Royse City ISD", "state": "Texas", "enrollment": 8521, "estValue": 51126, "freeUsers": 49, "starbridge": 8, "forms": 2, "visits": 24, "pageviews": 105, "lifecycle": "SQL", "tier": "Core"}, {"rank": 74, "score": 23.6, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Colorado Springs SD 11", "state": "Colorado", "enrollment": 23359, "estValue": 140154, "freeUsers": 18, "starbridge": 8, "forms": 3, "visits": 32, "pageviews": 116, "lifecycle": "SQL", "tier": "Growth"}, {"rank": 75, "score": 23.5, "territory": "TN/OH", "status": "ON TRACK", "rep": "Caroline Tell", "district": "Hamilton County Schools", "state": "Tennessee", "enrollment": 45176, "estValue": 271056, "freeUsers": 23, "starbridge": 6, "forms": 3, "visits": 34, "pageviews": 123, "lifecycle": "Opportunity", "tier": "Growth+"}, {"rank": 76, "score": 23.3, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Adams 12 Five Star Schools", "state": "Colorado", "enrollment": 36078, "estValue": 216468, "freeUsers": 14, "starbridge": 8, "forms": 0, "visits": 12, "pageviews": 93, "lifecycle": "SQL", "tier": "Growth"}, {"rank": 77, "score": 22.6, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Park City School District", "state": "Utah", "enrollment": 4743, "estValue": 28458, "freeUsers": 22, "starbridge": 8, "forms": 7, "visits": 11, "pageviews": 13, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 78, "score": 21.5, "territory": "Lone Star", "status": "ON TRACK", "rep": "Mike Powell", "district": "Lubbock-Cooper ISD", "state": "Texas", "enrollment": 7592, "estValue": 45552, "freeUsers": 62, "starbridge": 6, "forms": 1, "visits": 85, "pageviews": 409, "lifecycle": "SQL", "tier": "Core"}, {"rank": 79, "score": 21.5, "territory": "TN/OH", "status": "ON TRACK", "rep": "Caroline Tell", "district": "Collierville Schools", "state": "Tennessee", "enrollment": 9060, "estValue": 54360, "freeUsers": 41, "starbridge": 8, "forms": 0, "visits": 0, "pageviews": 0, "lifecycle": "Lead", "tier": "Growth+"}, {"rank": 80, "score": 21.2, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Vail Unified School District 20", "state": "Arizona", "enrollment": 14258, "estValue": 85548, "freeUsers": 19, "starbridge": 8, "forms": 2, "visits": 7, "pageviews": 11, "lifecycle": "Lead", "tier": "Growth"}, {"rank": 81, "score": 20.8, "territory": "Northeast", "status": "ON TRACK", "rep": "Monica Tinajero", "district": "Waltham Public Schools", "state": "Massachusetts", "enrollment": 5496, "estValue": 32976, "freeUsers": 58, "starbridge": 7, "forms": 0, "visits": 12, "pageviews": 31, "lifecycle": "Lead", "tier": "Growth+"}, {"rank": 82, "score": 20.1, "territory": "TN/OH", "status": "ON TRACK", "rep": "Caroline Tell", "district": "Forest Hills School District (OH)", "state": "Ohio", "enrollment": 7240, "estValue": 43440, "freeUsers": 76, "starbridge": 5, "forms": 0, "visits": 71, "pageviews": 407, "lifecycle": "Opportunity", "tier": "Growth+"}, {"rank": 83, "score": 19.9, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Fountain-Fort Carson SD 8", "state": "Colorado", "enrollment": 8201, "estValue": 49206, "freeUsers": 108, "starbridge": 3, "forms": 3, "visits": 22, "pageviews": 69, "lifecycle": "Lead", "tier": "Growth"}, {"rank": 84, "score": 19.8, "territory": "KY/PA", "status": "ON TRACK", "rep": "Brittany Freda", "district": "Boone County Schools", "state": "Kentucky", "enrollment": 20201, "estValue": 121206, "freeUsers": 39, "starbridge": 6, "forms": 1, "visits": 14, "pageviews": 64, "lifecycle": "MQL", "tier": "Growth+"}, {"rank": 85, "score": 19.2, "territory": "Lone Star", "status": "ON TRACK", "rep": "Mike Powell", "district": "Dayton ISD", "state": "Texas", "enrollment": 5619, "estValue": 33714, "freeUsers": 55, "starbridge": 6, "forms": 1, "visits": 18, "pageviews": 55, "lifecycle": "Lead", "tier": "Core"}, {"rank": 86, "score": 19.0, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Salt Lake City School District", "state": "Utah", "enrollment": 20239, "estValue": 121434, "freeUsers": 18, "starbridge": 6, "forms": 1, "visits": 79, "pageviews": 567, "lifecycle": "Lead", "tier": "Growth"}, {"rank": 87, "score": 18.8, "territory": "Northeast", "status": "ON TRACK", "rep": "Monica Tinajero", "district": "Egg Harbor Township SD", "state": "New Jersey", "enrollment": 7410, "estValue": 44460, "freeUsers": 57, "starbridge": 6, "forms": 0, "visits": 0, "pageviews": 0, "lifecycle": "SQL", "tier": "Growth+"}, {"rank": 88, "score": 18.6, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Liberty Elementary District", "state": "Arizona", "enrollment": 4450, "estValue": 26700, "freeUsers": 47, "starbridge": 6, "forms": 0, "visits": 64, "pageviews": 302, "lifecycle": "Opportunity", "tier": "Growth"}, {"rank": 89, "score": 16.4, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Sevier School District", "state": "Utah", "enrollment": 4828, "estValue": 28968, "freeUsers": 55, "starbridge": 4, "forms": 2, "visits": 58, "pageviews": 458, "lifecycle": "SQL", "tier": "Growth"}, {"rank": 90, "score": 16.0, "territory": "Mountain West", "status": "ON TRACK", "rep": "Jeff Couch", "district": "Widefield School District 3", "state": "Colorado", "enrollment": 9612, "estValue": 57672, "freeUsers": 51, "starbridge": 4, "forms": 0, "visits": 72, "pageviews": 352, "lifecycle": "Lead", "tier": "Growth"}, {"rank": 91, "score": 16.0, "territory": "Upper Midwest", "status": "ON TRACK", "rep": "Hattie Strong", "district": "Clarkston Community Schools", "state": "Michigan", "enrollment": 7648, "estValue": 45888, "freeUsers": 57, "starbridge": 4, "forms": 2, "visits": 9, "pageviews": 27, "lifecycle": "Opportunity", "tier": "Growth"}];


// ==================== ABM INSIGHTS TAB ====================
let abmScatterChart = null;
let abmBarChart = null;

function initAbmTab() {
  renderAbmKPIs();
  renderAbmTerritoryGrid();
  populateAbmFilters();
  renderAbmTable('all', 'all');
  renderAbmScatterChart('all');
  renderAbmBarChart();
}

function renderAbmKPIs() {
  const total = abmOpportunities.length;
  const behindCount = abmOpportunities.filter(d => d.status === 'BEHIND').length;
  const onTrackCount = abmOpportunities.filter(d => d.status === 'ON TRACK').length;
  const totalValue = abmOpportunities.reduce((s, d) => s + d.estValue, 0);
  const totalFreeUsers = abmOpportunities.reduce((s, d) => s + d.freeUsers, 0);
  const avgScore = (abmOpportunities.reduce((s, d) => s + d.score, 0) / total).toFixed(1);
  
  const kpiContainer = document.getElementById('abm-kpi-cards');
  if (!kpiContainer) return;
  kpiContainer.innerHTML = `
    <div class="kpi-card"><div class="kpi-value">${total}</div><div class="kpi-label">Total Districts</div></div>
    <div class="kpi-card" style="border-left:3px solid #ef4444"><div class="kpi-value">${behindCount}</div><div class="kpi-label">BEHIND Territory</div></div>
    <div class="kpi-card" style="border-left:3px solid #f59e0b"><div class="kpi-value">${onTrackCount}</div><div class="kpi-label">ON TRACK Territory</div></div>
    <div class="kpi-card"><div class="kpi-value">$${(totalValue/1000000).toFixed(1)}M</div><div class="kpi-label">Est. Account Value</div></div>
    <div class="kpi-card"><div class="kpi-value">${totalFreeUsers.toLocaleString()}</div><div class="kpi-label">Organic Free Users</div></div>
  `;
}

function renderAbmTerritoryGrid() {
  const grid = document.getElementById('abm-territory-grid');
  if (!grid) return;
  const territories = [...new Set(abmOpportunities.map(d => d.territory))].sort();
  grid.innerHTML = territories.map(t => {
    const items = abmOpportunities.filter(d => d.territory === t);
    const behindItems = items.filter(d => d.status === 'BEHIND');
    const totalVal = items.reduce((s, d) => s + d.estValue, 0);
    const totalFU = items.reduce((s, d) => s + d.freeUsers, 0);
    const avgSc = (items.reduce((s, d) => s + d.score, 0) / items.length).toFixed(1);
    const statusClass = behindItems.length === items.length ? 'behind' : (behindItems.length === 0 ? 'on-track' : 'mixed');
    const statusColors = {behind:'#ef4444', 'on-track':'#22c55e', mixed:'#f59e0b'};
    return `<div class="abm-territory-card" onclick="filterAbmByTerritory('${t}')" style="border-top:3px solid ${statusColors[statusClass]}">
      <div style="font-weight:700;font-size:0.95rem;margin-bottom:8px">${t}</div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:4px;font-size:0.8rem;color:#94a3b8">
        <div>Districts: <span style="color:#e2e8f0;font-weight:600">${items.length}</span></div>
        <div>Avg Score: <span style="color:#e2e8f0;font-weight:600">${avgSc}</span></div>
        <div>Free Users: <span style="color:#e2e8f0;font-weight:600">${totalFU.toLocaleString()}</span></div>
        <div>Value: <span style="color:#e2e8f0;font-weight:600">$${(totalVal/1000).toFixed(0)}K</span></div>
      </div>
    </div>`;
  }).join('');
}

function filterAbmByTerritory(territory) {
  const sel = document.getElementById('abm-territory-filter');
  if (sel) { sel.value = territory; }
  const statusSel = document.getElementById('abm-status-filter');
  const status = statusSel ? statusSel.value : 'all';
  renderAbmTable(territory, status);
  renderAbmScatterChart(territory);
}

function populateAbmFilters() {
  const sel = document.getElementById('abm-territory-filter');
  if (!sel) return;
  const territories = [...new Set(abmOpportunities.map(d => d.territory))].sort();
  sel.innerHTML = '<option value="all">All Territories</option>' + territories.map(t => `<option value="${t}">${t}</option>`).join('');
  sel.addEventListener('change', () => {
    const statusSel = document.getElementById('abm-status-filter');
    renderAbmTable(sel.value, statusSel ? statusSel.value : 'all');
    renderAbmScatterChart(sel.value);
  });
  const statusSel = document.getElementById('abm-status-filter');
  if (statusSel) {
    statusSel.addEventListener('change', () => {
      renderAbmTable(sel.value, statusSel.value);
      renderAbmScatterChart(sel.value);
    });
  }
}

function renderAbmTable(territory, status) {
  const tbody = document.getElementById('abm-table-body');
  if (!tbody) return;
  let data = [...abmOpportunities];
  if (territory !== 'all') data = data.filter(d => d.territory === territory);
  if (status !== 'all') data = data.filter(d => d.status === status);
  data.sort((a, b) => b.score - a.score);
  
  const countEl = document.getElementById('abm-showing-count');
  if (countEl) countEl.textContent = `Showing ${data.length} of ${abmOpportunities.length} districts`;
  
  tbody.innerHTML = data.map((d, i) => {
    const statusBadge = d.status === 'BEHIND' 
      ? '<span style="background:#991b1b;color:#fecaca;padding:2px 8px;border-radius:9999px;font-size:0.7rem;font-weight:600">BEHIND</span>'
      : '<span style="background:#92400e;color:#fef3c7;padding:2px 8px;border-radius:9999px;font-size:0.7rem;font-weight:600">ON TRACK</span>';
    const scoreColor = d.score >= 40 ? '#22c55e' : d.score >= 25 ? '#f59e0b' : '#94a3b8';
    return `<tr style="border-bottom:1px solid rgba(255,255,255,0.05)">
      <td style="padding:10px 12px;font-weight:700;color:${scoreColor}">${d.score}</td>
      <td style="padding:10px 12px;font-weight:600;color:#e2e8f0">${d.district}</td>
      <td style="padding:10px 12px;color:#94a3b8">${d.state}</td>
      <td style="padding:10px 12px">${statusBadge}</td>
      <td style="padding:10px 12px;color:#94a3b8">${d.territory}</td>
      <td style="padding:10px 12px;color:#94a3b8">${d.rep}</td>
      <td style="padding:10px 12px;color:#60a5fa;font-weight:600">${d.freeUsers}</td>
      <td style="padding:10px 12px;color:#94a3b8">${d.starbridge}/10</td>
      <td style="padding:10px 12px;color:#94a3b8">${d.enrollment.toLocaleString()}</td>
      <td style="padding:10px 12px;color:#94a3b8">$${(d.estValue/1000).toFixed(0)}K</td>
      <td style="padding:10px 12px;color:#94a3b8">${d.forms}</td>
      <td style="padding:10px 12px;color:#94a3b8">${d.visits}</td>
      <td style="padding:10px 12px"><span style="background:rgba(255,255,255,0.1);padding:2px 8px;border-radius:9999px;font-size:0.7rem">${d.lifecycle}</span></td>
    </tr>`;
  }).join('');
}

function renderAbmScatterChart(territory) {
  const ctx = document.getElementById('abmScatterChart');
  if (!ctx) return;
  if (abmScatterChart) abmScatterChart.destroy();
  
  let data = [...abmOpportunities];
  if (territory !== 'all') data = data.filter(d => d.territory === territory);
  
  const behindData = data.filter(d => d.status === 'BEHIND').map(d => ({x: d.freeUsers, y: d.score, r: Math.max(4, Math.sqrt(d.enrollment/1000)*2), label: d.district, territory: d.territory}));
  const onTrackData = data.filter(d => d.status === 'ON TRACK').map(d => ({x: d.freeUsers, y: d.score, r: Math.max(4, Math.sqrt(d.enrollment/1000)*2), label: d.district, territory: d.territory}));
  
  abmScatterChart = new Chart(ctx, {
    type: 'bubble',
    data: {
      datasets: [{
        label: 'BEHIND',
        data: behindData,
        backgroundColor: 'rgba(239,68,68,0.6)',
        borderColor: 'rgba(239,68,68,0.8)',
        borderWidth: 1
      }, {
        label: 'ON TRACK',
        data: onTrackData,
        backgroundColor: 'rgba(245,158,11,0.6)',
        borderColor: 'rgba(245,158,11,0.8)',
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { labels: { color: '#94a3b8' } },
        tooltip: {
          callbacks: {
            label: function(ctx) {
              const d = ctx.raw;
              return [d.label, `Territory: ${d.territory}`, `Score: ${d.y}`, `Free Users: ${d.x}`];
            }
          }
        }
      },
      scales: {
        x: { title: { display: true, text: 'Free Users (Organic Adoption)', color: '#94a3b8' }, grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#94a3b8' } },
        y: { title: { display: true, text: 'Composite Score', color: '#94a3b8' }, grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#94a3b8' } }
      }
    }
  });
}

function renderAbmBarChart() {
  const ctx = document.getElementById('abmBarChart');
  if (!ctx) return;
  if (abmBarChart) abmBarChart.destroy();
  
  const territories = [...new Set(abmOpportunities.map(d => d.territory))].sort();
  const values = territories.map(t => {
    const items = abmOpportunities.filter(d => d.territory === t);
    return items.reduce((s, d) => s + d.estValue, 0);
  });
  const colors = territories.map(t => {
    const items = abmOpportunities.filter(d => d.territory === t);
    const allBehind = items.every(d => d.status === 'BEHIND');
    const allOnTrack = items.every(d => d.status === 'ON TRACK');
    return allBehind ? 'rgba(239,68,68,0.7)' : allOnTrack ? 'rgba(245,158,11,0.7)' : 'rgba(96,165,250,0.7)';
  });
  
  abmBarChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: territories,
      datasets: [{
        label: 'Est. Account Value',
        data: values,
        backgroundColor: colors,
        borderColor: colors.map(c => c.replace('0.7', '1')),
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      indexAxis: 'y',
      plugins: {
        legend: { display: false },
        tooltip: { callbacks: { label: function(ctx) { return '$' + (ctx.raw/1000).toFixed(0) + 'K'; } } }
      },
      scales: {
        x: { title: { display: true, text: 'Estimated Account Value ($)', color: '#94a3b8' }, grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#94a3b8', callback: function(v) { return '$' + (v/1000) + 'K'; } } },
        y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#94a3b8' } }
      }
    }
  });
}

// Hook ABM tab init into the existing tab switching logic
const origTabClick = document.querySelectorAll ? null : null;
document.addEventListener('click', function(e) {
  const btn = e.target.closest('.tab-btn');
  if (btn && btn.dataset.tab === 'abm-insights' && !window.__abmInitialized) {
    window.__abmInitialized = true;
    setTimeout(initAbmTab, 100);
  }
});

// Also initialize when DOM is ready if the tab is visible
if (document.getElementById('tab-abm-insights')) {
  const observer = new MutationObserver(function(mutations) {
    const tab = document.getElementById('tab-abm-insights');
    if (tab && tab.style.display !== 'none' && !window.__abmInitialized) {
      window.__abmInitialized = true;
      setTimeout(initAbmTab, 100);
      observer.disconnect();
    }
  });
  observer.observe(document.body, {attributes: true, subtree: true});
}

// === END ABM INSIGHTS ===
</script>
</body>
</html>
